(self.webpackJsonp=self.webpackJsonp||[]).push([[6,17],{1017:function(e,t){e.exports='<a class=ag-grid-banner href="https://www.ag-grid.com/?utm_source=plunker&utm_medium=banner&utm_campaign=sponsorship" target=_blank rel=noopener> <img src="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjM1IDQwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2UtbWl0ZXJsaW1pdD0iMiI+PHBhdGggZD0iTTIwNS45OTMgMjUuNjU4di03Ljk0NmgtMTMuNTQxbC03Ljk0NyA3Ljk0NmgyMS40ODh6IiBmaWxsPSIjZmY4YjAwIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48cGF0aCBkPSJNMjIxLjI1IDUuOTVoLTE2Ljk3NGwtOC4wMSA3Ljk0N2gyNC45ODRWNS45NTF6IiBmaWxsPSIjNTViMmM2IiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48cGF0aCBkPSJNMTc2LjYyMiAzMy42MDVsNC4wNy00LjA2OWgxMy43M3Y3Ljk0N2gtMTcuOHYtMy44Nzh6IiBmaWxsPSJyZWQiIGZpbGwtcnVsZT0ibm9uemVybyIvPjxwYXRoIGQ9Ik0xNzkuNjEgMjEuNzhoOC43NzNsOC4wMS03Ljk0NkgxNzkuNjF2Ny45NDZ6TTE3MC4wMSAzMy42MDVoNi42MTJsNy44ODMtNy45NDdoLTE0LjQ5NHY3Ljk0N3pNMjA0LjI3NiA1Ljk1bC00LjA2OCA0LjA3SDE3NC4yN1YyLjA3MmgzMC4wMDZWNS45NXoiIGZpbGw9IiNiNGJiYmYiIGZpbGwtcnVsZT0ibm9uemVybyIvPjxwYXRoIGQ9Ik0zMy44NCAzMi4yMDZIMjEuMzc4bC0yLjE2MiA1LjM0SDEzLjc1bDExLjUwNy0yNi45NTRoNC43NjhMNDEuNTMgMzcuNTQ2aC01LjUzbC0yLjE2Mi01LjM0em0tMS43MTctNC4yNkwyNy42MDkgMTYuOTVsLTQuNTE0IDEwLjk5OGg5LjAyOHpNMTE3LjQzNyAyMC41MDljMS41ODktMi4zNTIgNS41OTQtMi42MDcgNy4yNDctMi42MDd2NC41NzhjLTIuMDM0IDAtNC4wNjkuMDYzLTUuMjc3Ljk1My0xLjIwNy44OS0xLjg0MyAyLjA5OC0xLjg0MyAzLjU2djEwLjU1M2gtNC45NTlWMTcuOTAyaDQuNzY4bC4wNjQgMi42MDd6IiBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMTI3LjQxOCAxNy45MDJoNC45NTh2MTkuNjQ0aC00Ljk1OHpNMTI3LjQxOCA5LjEzaDQuOTU4djUuODQ4aC00Ljk1OHoiLz48cGF0aCBkPSJNMTU2Ljk3OSA5LjEzdjI4LjQxNmgtNC43NjhsLS4xMjctMi45ODhhOC4zMSA4LjMxIDAgMCAxLTIuNjcgMi40OGMtMS4wODEuNTcyLTIuNDE2Ljg5LTMuOTQyLjg5LTEuMzM1IDAtMi42MDYtLjI1NS0zLjY4Ny0uNy0xLjE0NC0uNTA4LTIuMTYyLTEuMTQ0LTIuOTg4LTIuMDM0YTkuNTczIDkuNTczIDAgMCAxLTEuOTctMy4xNzljLS41MS0xLjIwNy0uNy0yLjYwNi0uNy00LjEzMiAwLTEuNTI1LjI1NC0yLjkyNC43LTQuMTk2LjUwOC0xLjI3MSAxLjE0NC0yLjM1MiAxLjk3LTMuMjQyLjgyNi0uODkgMS44NDQtMS41ODkgMi45ODgtMi4wOTggMS4xNDQtLjUwOCAyLjM1Mi0uNzYyIDMuNjg3LS43NjIgMS41MjYgMCAyLjc5Ny4yNTQgMy44NzguODI2IDEuMDguNTcyIDEuOTcgMS4zMzUgMi42NyAyLjQxNlY5LjE5M2g0Ljk1OXYtLjA2NHptLTEwLjQyNiAyNC41MzhjMS42NTMgMCAyLjkyNC0uNTcyIDMuOTQxLTEuNjUzIDEuMDE3LTEuMDggMS41MjYtMi41NDIgMS41MjYtNC4zMjIgMC0xLjc4LS41MDktMy4xOC0xLjUyNi00LjMyMy0xLjAxNy0xLjA4MS0yLjI4OC0xLjY1My0zLjk0MS0xLjY1My0xLjU5IDAtMi45MjUuNTcyLTMuODc4IDEuNjUzLTEuMDE3IDEuMDgtMS41MjYgMi41NDMtMS41MjYgNC4zMjMgMCAxLjc4LjUwOSAzLjE3OCAxLjUyNiA0LjI1OSAxLjAxNyAxLjE0NCAyLjI4OCAxLjcxNiAzLjg3OCAxLjcxNk03MC4yMDIgMjIuMzUySDU3LjkzM3Y0LjI2aDYuOTkzYy0uMTkgMi4xNjEtMS4wMTcgMy44MTQtMi40MTYgNS4xNS0xLjM5OCAxLjI3LTMuMTc4IDEuOTA2LTUuNDY3IDEuOTA2LTEuMjcxIDAtMi40OC0uMjU0LTMuNDk3LS42OTlhNy4wMjUgNy4wMjUgMCAwIDEtMi43MzMtMS45N2MtLjc2My0uODI3LTEuMzM1LTEuODQ0LTEuNzgtMy4wNTItLjQ0NS0xLjIwOC0uNjM2LTIuNDgtLjYzNi0zLjk0MiAwLTEuNDYyLjE5LTIuNzMzLjYzNi0zLjk0MS4zODEtMS4yMDggMS4wMTctMi4xNjIgMS43OC0zLjA1Mi43NjMtLjgyNiAxLjY1My0xLjQ2MiAyLjczMy0xLjk3YTkuMTE1IDkuMTE1IDAgMCAxIDMuNTYtLjdjMi42NyAwIDQuNzA1LjYzNiA2LjEwMyAxLjkwOGwzLjMwNi0zLjMwNmMtMi40OC0xLjkwNy01LjY1OC0yLjkyNS05LjQwOC0yLjkyNS0yLjA5OCAwLTQuMDA2LjMxOC01LjcyMiAxLjAxOC0xLjcxNi42OTktMy4xNzkgMS41ODktNC4zODYgMi43OTdBMTIuMDc0IDEyLjA3NCAwIDAgMCA0NC4yIDE4LjIyYy0uNjM1IDEuNzE3LS45NTMgMy42MjQtLjk1MyA1LjY1OCAwIDIuMDM1LjMxOCAzLjk0MiAxLjAxNyA1LjY1OC43IDEuNzE3IDEuNTkgMy4xNzkgMi43OTcgNC4zODdhMTIuMDc0IDEyLjA3NCAwIDAgMCA0LjM4NyAyLjc5N2MxLjcxNi43IDMuNjIzIDEuMDE3IDUuNjU4IDEuMDE3IDIuMDM0IDAgMy44NzctLjMxOCA1LjUzLTEuMDE3IDEuNjUzLS43IDMuMDUyLTEuNTkgNC4xOTYtMi43OTcgMS4xNDQtMS4yMDggMi4wMzQtMi42NyAyLjY3LTQuMzg3LjYzNi0xLjcxNi45NTQtMy42MjMuOTU0LTUuNjU4di0uODI2Yy0uMTkxLS4xMjctLjI1NS0uNDQ1LS4yNTUtLjdNMTA4Ljk4MiAyMi4zNTJoLTEyLjI3djQuMjZoNi45OTNjLS4xOSAyLjE2MS0xLjAxNyAzLjgxNC0yLjQxNiA1LjE1LTEuMzk4IDEuMjctMy4xNzggMS45MDYtNS40NjcgMS45MDYtMS4yNzEgMC0yLjQ4LS4yNTQtMy40OTYtLjY5OWE3LjAyNSA3LjAyNSAwIDAgMS0yLjczNC0xLjk3Yy0uNzYzLS44MjctMS4zMzUtMS44NDQtMS43OC0zLjA1Mi0uNDQ1LTEuMjA4LS42MzYtMi40OC0uNjM2LTMuOTQyIDAtMS40NjIuMTkxLTIuNzMzLjYzNi0zLjk0MS4zODEtMS4yMDggMS4wMTctMi4xNjIgMS43OC0zLjA1Mi43NjMtLjgyNiAxLjY1My0xLjQ2MiAyLjczNC0xLjk3YTkuMTE1IDkuMTE1IDAgMCAxIDMuNTYtLjdjMi42NyAwIDQuNzA0LjYzNiA2LjEwMyAxLjkwOGwzLjMwNS0zLjMwNmMtMi40NzktMS45MDctNS42NTgtMi45MjUtOS40MDgtMi45MjUtMi4wOTggMC00LjAwNS4zMTgtNS43MjIgMS4wMTgtMS43MTYuNjk5LTMuMTc4IDEuNTg5LTQuMzg2IDIuNzk3YTEyLjA3NCAxMi4wNzQgMCAwIDAtMi43OTggNC4zODZjLS42MzUgMS43MTctLjk1MyAzLjYyNC0uOTUzIDUuNjU4IDAgMi4wMzUuMzE4IDMuOTQyIDEuMDE3IDUuNjU4LjcgMS43MTcgMS41OSAzLjE3OSAyLjc5NyA0LjM4N2ExMi4wNzQgMTIuMDc0IDAgMCAwIDQuMzg3IDIuNzk3YzEuNzE2LjcgMy42MjMgMS4wMTcgNS42NTggMS4wMTcgMi4wMzQgMCAzLjg3OC0uMzE4IDUuNTMtMS4wMTcgMS42NTMtLjcgMy4wNTItMS41OSA0LjE5Ni0yLjc5NyAxLjE0NS0xLjIwOCAyLjAzNS0yLjY3IDIuNjctNC4zODcuNjM2LTEuNzE2Ljk1NC0zLjYyMy45NTQtNS42NTh2LS44MjZjLS4xOS0uMTI3LS4yNTQtLjQ0NS0uMjU0LS43IiBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4="/> <p class=text>backing <span class=emphasis>Plunker</span></p> </a> '},1018:function(e,t,n){},1019:function(e,t,n){"use strict";(function(e){n(341),n(17),n(14),n(202),n(44),n(57),n(79),n(31),n(12),n(13),n(20),n(28),n(71),n(24),n(11),n(7),n(8);var r=n(6),o=n.n(r),a=n(1021),i=n.n(a),s=n(51),c=n(641),l=n(928),u=n(170),p=n(1255),d=n(1067),f=n(1070),m=n(786),h=n(780),y=n(651),v=n(52),g=n(1258),k=n(664),b=n(665),w=n(53),j=n(1139),C=n.n(j);n(1140);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){E(a,r,o,i,s,"next",e)}function s(e){E(a,r,o,i,s,"throw",e)}i(void 0)}))}}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var o=A(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L(this,n)}}function L(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t,n){return t&&N(e.prototype,t),n&&N(e,n),e}var R={default:function(){return n.e(91).then(n.bind(null,1213))}};function z(){this.commander.createCommand({name:"tree.createDirectory",description:"Create a new directory",scope:this.$scope,defaults:{parent:this.tree},handler:this.commandTreeCreateDirectory.bind(this)}),this.commander.createCommand({name:"tree.createFile",description:"Create a new file",scope:this.$scope,defaults:{parent:this.tree},handler:this.commandTreeCreateFile.bind(this)}),this.commander.createCommand({name:"tree.delete",description:"Delete a file or directory",scope:this.$scope,handler:this.commandTreeDelete.bind(this)}),this.commander.createCommand({name:"tree.rename",description:"Rename a file or directory",scope:this.$scope,handler:this.commandTreeRename.bind(this)}),this.commander.createCommand({name:"ide.beautifyCode",description:"Format your source code",hotkeys:c.KeyMod.Alt|c.KeyMod.Shift|c.KeyCode.KEY_F,scope:this.$scope,handler:this.commandIdeBeautifyCode.bind(this)}),this.commander.createCommand({name:"ide.createDirectory",description:"Create a new directory",scope:this.$scope,defaults:{parent:this.tree},handler:this.commandIdeCreateDirectory.bind(this)}),this.commander.createCommand({name:"ide.createFile",description:"Create a new file",scope:this.$scope,defaults:{parent:this.tree},handler:this.commandIdeCreateFile.bind(this)}),this.commander.createCommand({name:"ide.delete",description:"Delete a file or directory",scope:this.$scope,handler:this.commandIdeDelete.bind(this)}),this.commander.createCommand({name:"ide.download",description:"Download a file or directory",scope:this.$scope,defaults:{entry:this.tree},handler:this.commandIdeDownload.bind(this)}),this.commander.createCommand({name:"ide.insertPackage",description:"Find and insert a package",hotkeys:c.KeyMod.CtrlCmd|c.KeyMod.Shift|c.KeyCode.KEY_P,scope:this.$scope,handler:this.commandIdeInsertPackage.bind(this)}),this.commander.createCommand({name:"ide.preview.back",description:"Navigate live preview back",scope:this.$scope,handler:this.commandIdePreviewBack.bind(this)}),this.commander.createCommand({name:"ide.preview.forward",description:"Navigate live preview forward",scope:this.$scope,handler:this.commandIdePreviewForward.bind(this)}),this.commander.createCommand({name:"ide.preview.popout",description:"Open the preview in a separate window",scope:this.$scope,handler:this.commandIdePreviewPopout.bind(this)}),this.commander.createCommand({name:"ide.preview.refresh",description:"Refresh live preview",hotkeys:c.KeyMod.CtrlCmd|c.KeyCode.Enter,scope:this.$scope,handler:this.commandIdePreviewRefresh.bind(this)}),this.commander.createCommand({name:"ide.preview.toggle",description:"Toggle live preview pane",hotkeys:c.KeyMod.CtrlCmd|c.KeyMod.Shift|c.KeyCode.Enter,scope:this.$scope,defaults:{entry:this.tree},handler:this.commandIdePreviewToggle.bind(this)}),this.commander.createCommand({name:"ide.rename",description:"Rename a file or directory",scope:this.$scope,handler:this.commandIdeRename.bind(this)}),this.commander.createCommand({name:"workspace.close",description:"Close an open workspace pane",scope:this.$scope,handler:this.commandWorkspaceClose.bind(this)}),this.commander.createCommand({name:"workspace.focus",description:"Focus on a workspace pane",scope:this.$scope,handler:this.commandWorkspaceFocus.bind(this)}),this.commander.createCommand({name:"workspace.move",description:"Move a workspace pane",scope:this.$scope,handler:this.commandWorkspaceMove.bind(this)}),this.commander.createCommand({name:"workspace.open",description:"Open a file in the workspace",scope:this.$scope,handler:this.commandWorkspaceOpen.bind(this)})}t.a=o.a.module("plunker.component.ide",[u.a,p.a,d.a,v.a,g.a,k.a,b.a,w.a]).directive("plunkerIde",[function(){return{restrict:"E",replace:!0,template:C.a,controller:function(){function t(n,r,o,a,i,u,p,d){var f=this;O(this,t);var h=this;this.$q=n,this.$scope=r,this.$transclude=o,this.boundOnTreeEvent=this.onTreeEvent.bind(this),this.commander=a,this.disposables=[],this.typingsLoaded=!1,this.typingsWorker=new Worker(e,void 0),this.typingsRpc=new m.a({getFileContents:function(e){var t=f.tree.get(e);if(t)return t.toJSON().content}},{isChild:!1,registerMessageListener:function(e){return f.typingsWorker.onmessage=function(t){return e(t.data)},function(){}},sendMessage:function(e){return f.typingsWorker?f.typingsWorker.postMessage(e):function(){}}}),this.npm=i,this.panes=u,this.preferences=p,this.toast=d,this.tree=new y.a,this.workspace=this.panes.workspace,this.runtimeLoaded=null,this.debouncedLoadAllTypings=s.debounce(this.loadAllTypings.bind(this),500,{leading:!1,trailing:!0,maxWait:1/0}),this.debouncedUpdateCompilerOptions=s.debounce(this.updateCompilerOptions.bind(this),500,{leading:!1,trailing:!0,maxWait:1/0}),this.disposables.push(c.languages.typescript.typescriptDefaults.addExtraLib("\n            declare module '*.css' {\n              interface IClassNames {\n                [className: string]: string\n              }\n              const classNames: IClassNames;\n              export = classNames;\n            }")),this.codeEditorService=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(n,e);var t=S(n);function n(){return O(this,n),t.apply(this,arguments)}return P(n,[{key:"openCodeEditor",value:function(e){var t=e.options,n=e.resource,r="file:///".concat(h.tree.id,"/"),o=n.toString(!0),i=t.selection;if(0===o.indexOf(r)){var c=o.slice(r.length),l=h.tree.get(c);if(l){var u=h.panes.getByEntry(l);if(u)return a.execute("workspace.focus",{pane:u,selection:i}).then((function(e){return e&&e.strategy&&e.strategy.editor}));var p=s.find(h.workspace,(function(e){return e.controller&&e.controller.hasFocus}));return a.execute("workspace.open",{entry:l,replace:p,focus:i}).then((function(e){return e&&e.strategy&&e.strategy.editor}))}}return h.toast.warn("Failed to open ".concat(n.fsPath)),Promise.resolve(null)}}]),n}(l.a)),this.disposables.push(this.codeEditorService)}var n,r,o;return t.$inject=["$q","$scope","$transclude","commander","npm","panes","preferences","toast"],P(t,[{key:"$onDestroy",value:function(){this.tree.offAny(this.boundOnTreeEvent),this.disposables.forEach((function(e){return e.dispose()}))}},{key:"$onInit",value:function(){var e=this;this.previewPaneType=this.previewPaneType||"preview",c.languages.typescript.typescriptDefaults.setMaximumWorkerIdleTime(-1),c.languages.typescript.javascriptDefaults.setMaximumWorkerIdleTime(-1);var t,n={provideDocumentFormattingEdits:(t=T(regeneratorRuntime.mark((function t(n,r,o){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(f.a)(n.getValue(),{filepath:n.uri.path.replace(/^\/[^/]\//,""),singleQuote:!0,tabWidth:r.tabSize,trailingComma:"es5",useTabs:!r.insertSpaces});case 3:if(a=t.sent,!o.isCancellationRequested){t.next=6;break}return t.abrupt("return",[]);case 6:return t.abrupt("return",[{range:n.getFullModelRange(),text:a}]);case 9:t.prev=9,t.t0=t.catch(0),e.toast.error({title:"Formatting failed",body:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])}))),function(e,n,r){return t.apply(this,arguments)})};c.languages.getLanguages().forEach((function(e){setTimeout((function(){c.languages.registerDocumentFormattingEditProvider(e.id,n)}),2e3)})),c.languages.typescript.typescriptDefaults.setEagerModelSync(!0),c.languages.typescript.javascriptDefaults.setEagerModelSync(!0)}},{key:"$postLink",value:function(){this.$scope.$emit("ide.ready",this),this.tree.onAny(this.boundOnTreeEvent),this.updateCompilerOptions(),this.loadAllTypings(),z.call(this)}},{key:"getActiveEntry",value:function(){return this.panes.focusedPane?this.panes.focusedPane.entry:null}},{key:"getEntries",value:function(){var e={};return this.tree.traverse((function(t){if("file"===t.type&&t.strategy.undoManager){var n=t.toJSON();e[t.pathname]={content:n.content,encoding:n.encoding,version:t.strategy.undoManager.$maxRev}}})),e}},{key:"getPackageJson",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fallback,n=e.throwOnInvalid,r=void 0!==n&&n,o=this.tree.get("package.json");if(!o)return t;var a=o.toBuffer().toString("utf8");try{return JSON.parse(a)}catch(e){if(r)throw new Error('Error parsing "package.json" as JSON: '.concat(e.message));return t}}},{key:"getPlunkerConfig",value:function(){var e=this.getPackageJson({fallback:{}})["plnkr.co"]||{};return e.runtime||(e.runtime="default"),e}},{key:"loadRuntime",value:(o=T(regeneratorRuntime.mark((function e(t){var n,r,o,a,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getPlunkerConfig(),(r=R[n.runtime])||(this.toast.error({title:"Unable to load unknown runtime '".concat(n.runtime,"."),body:"Supported runtimes are: ".concat(Object.keys(R).join(", "),".")}),r=R.default),e.next=5,r();case 5:if(o=e.sent,a=o.Runtime,i=new a({preferences:this.preferences,tree:this.tree}),!t){e.next=14;break}return e.next=11,t;case 11:return s=e.sent,e.next=14,s.onStop();case 14:return e.next=16,i.onStart();case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"onClickCreateDirectory",value:function(e,t){this.commander.execute("ide.createDirectory",{parent:t})}},{key:"onClickCreateFile",value:function(e,t){var n=this;this.commander.execute("ide.createFile",{parent:t}).then((function(e){if(e){var t=n.panes.getDefaultType(e),r=n.panes.getByType(t,{recent:!0});return r?n.commander.execute("workspace.open",{entry:e,focus:!0,replace:r}):n.commander.execute("workspace.open",{before:n.panes.get(),entry:e,focus:!0})}}))}},{key:"onClickDeleteEntry",value:function(e,t){this.commander.execute("ide.delete",{entry:t})}},{key:"onClickDownload",value:function(e,t){this.commander.execute("ide.download",{entry:t})}},{key:"onClickPreview",value:function(e,t){if(!this.panes.getByEntry(t,{type:this.previewPaneType})){var n=this.panes.get({last:!0});return this.commander.execute("workspace.open",{entry:t,after:n,type:this.previewPaneType})}}},{key:"onClickRenameEntry",value:function(e,t){this.commander.execute("ide.rename",{entry:t})}},{key:"onPaneClickClose",value:function(e,t){this.commander.execute("workspace.close",{pane:t})}},{key:"onTreeEvent",value:function(e,t){t.entry&&("package.json"===t.entry.pathname&&(this.runtimeLoaded=this.loadRuntime(this.runtimeLoaded),this.debouncedLoadAllTypings()),"tsconfig.json"!==t.entry.pathname&&"jsconfig.json"!==t.entry.pathname||this.debouncedUpdateCompilerOptions())}},{key:"onTreeClick",value:function(e,t){if("file"===t.type){e.preventDefault();var n=this.panes.getByEntry(t);if(n)return this.commander.execute("workspace.focus",{pane:n});var r=this.panes.getDefaultType(t),o=this.panes.getByType(r,{recent:!0});return o?this.commander.execute("workspace.open",{entry:t,focus:!0,replace:o}):this.commander.execute("workspace.open",{before:this.panes.get(),entry:t,focus:!0})}}},{key:"onTreeContextmenu",value:function(e,t){e.preventDefault();var n=[];"directory"!==t.type&&"file"!==t.type||(n.push({text:"Rename...",handler:["$event","entry",this.onClickRenameEntry.bind(this)]}),n.push({text:"Delete",handler:["$event","entry",this.onClickDeleteEntry.bind(this)]})),"directory"!==t.type&&"root"!==t.type||(n.length&&n.push(null),n.push({text:"Create file...",handler:["$event","entry",this.onClickCreateFile.bind(this)]}),n.push({text:"Create directory...",handler:["$event","entry",this.onClickCreateDirectory.bind(this)]})),n.length&&n.push(null),n.push({text:"Download as...",handler:["$event","entry",this.onClickDownload.bind(this)]}),n.length&&n.push(null),n.push({text:"Preview",handler:["$event","entry",this.onClickPreview.bind(this)]}),this.toast.menu({event:e,locals:{entry:t},items:n})}},{key:"commandIdeDelete",value:function(e){var t=this;return this.toast.confirm({title:"Are you sure that you would like to delete "+e.entry.pathname+"?",resolveOnNo:!0}).then((function(n){if(n)return t.commander.execute("tree.delete",{entry:e.entry})}))}},{key:"commandIdeDownload",value:function(e){var t=this,n=e.entry.toFile();return this.toast.prompt({title:"Download "+e.entry.pathname+" as:",label:"Filename",value:n.name,required:!0}).then((function(e){if(!e)return t.toast.warn("You must indicate a filename");i()(n,e,n.type)}))}},{key:"commandIdeInsertPackage",value:(r=T(regeneratorRuntime.mark((function e(){var t,n,r,o,a,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.find(this.workspace,(function(e){return e.controller&&e.controller.hasFocus&&e.entry.strategy instanceof h.a})),n=function(e){var t=i.tree.get("package.json")||i.tree.createFile("package.json",{content:JSON.stringify({name:"plunker-project",dependencies:{}},null,2)}),n=t.toJSON(),r=t.strategy.model,o=r.getOptions().tabSize;if(!r)throw new Error("The file 'package.json' does not appear to contain text");try{var a=JSON.parse(n.content);if(a.dependencies||(a.dependencies={}),"object"!==D(a.dependencies))throw i.toast.error("The dependencies field in the file 'package.json' must be an object"),new Error("The dependencies field in the file 'package.json' must be an object");a.dependencies[e.name]="^".concat(e.version),r.setValue(JSON.stringify(a,null,o)),i.toast.success("Added '".concat(e.name,"@").concat(e.version,"' to package.json"))}catch(e){i.toast.error(e&&e.message||"Error while parsing the file 'package.json' as JSON")}},r=function(e){switch(e.target){case"cursor":var n=t.entry.strategy.editSession,r=n.getSelection().getCursor(),o=n.getLine(r.row).match(/^(\s*)/)[1]||"";s.forEach(e.assets,(function(e){n.insert(r,e.tag+n.doc.getNewLineCharacter()+o)}));break;case"head":return a(s.filter(e.assets,["type","stylesheet"]),"head"),void a(s.filter(e.assets,["type","script"]),"head");case"body":return a(s.filter(e.assets,["type","stylesheet"]),"head"),void a(s.filter(e.assets,["type","script"]),"body");case"none":return;default:i.toast.warn("Inserting to "+e.target+" is not yet supported")}var a=function(e,n){var r=t.entry.strategy.editSession,o=t.controller.strategy.editor,a=new RegExp("</"+n+"s*>","m"),c=o.find(a,{preventScroll:!0});if(!c)return i.toast.warn("No closing head tag found");var l=r.getLine(c.start.row).slice(0,c.start.column).match(/^(\s*)(\S*)$/),u=(l[1]||"")+r.getTabString(),p="";s.forEach(e,(function(e){p+=u+e.tag+r.doc.getNewLineCharacter()})),l[2]?(p=r.doc.getNewLineCharacter()+p+(l[1]||""),r.insert(c.start,p)):r.insert({row:c.start.row,column:0},p)}},o=t.entry.mimeType.match(/text\/html/i),e.next=6,this.npm.showSearch({showFilePicker:o});case 6:return a=e.sent,n(a),o&&r(a),e.abrupt("return");case 10:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"commandIdeBeautifyCode",value:(n=T(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.find(this.workspace,(function(e){return e.controller&&e.controller.hasFocus&&e.entry.strategy instanceof h.a}))){e.next=4;break}return this.toast.warn("Your cursor must be focused on a code editor pane to run the code formatter"),e.abrupt("return");case 4:return n=t.strategy.editor,e.abrupt("return",n.trigger("ide","editor.action.formatDocument"));case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"commandIdeCreateDirectory",value:function(e){var t=this;return this.toast.prompt({title:"New Folder",label:"Filename"}).then((function(n){return t.commander.execute("tree.createDirectory",{parent:e.parent,filename:n})})).catch((function(e){return e instanceof Error?t.toast.error(e.message):null}))}},{key:"commandIdeCreateFile",value:function(e){var t=this;return this.toast.prompt({title:"New File",label:"Filename"}).then((function(n){return t.commander.execute("tree.createFile",{parent:e.parent,filename:n})})).catch((function(e){return e instanceof Error?t.toast.error(e.message):null}))}},{key:"commandIdePreviewBack",value:function(e){s(this.panes.workspace).filter(e.pane||["type",this.previewPaneType]).forEach((function(e){e.strategy.navigate(-1)}))}},{key:"commandIdePreviewForward",value:function(e){s(this.panes.workspace).filter(e.pane||["type",this.previewPaneType]).forEach((function(e){e.strategy.navigate(1)}))}},{key:"commandIdePreviewPopout",value:function(e){e.url&&(window.open(e.url,"blank").opener=null)}},{key:"commandIdePreviewRefresh",value:function(e){s(this.panes.workspace).filter(e.pane||["type",this.previewPaneType]).forEach((function(t){t.strategy.refresh(e.path)}))}},{key:"commandIdePreviewToggle",value:function(e){var t=this.panes.getByEntry(e.entry,{type:this.previewPaneType}),n=this.panes.get({last:!0});return t?this.commander.execute("workspace.close",{pane:t}):this.commander.execute("workspace.open",{after:n,entry:e.entry,type:this.previewPaneType})}},{key:"commandIdeRename",value:function(e){var t=this;return this.toast.prompt({title:"Rename "+e.entry.type,label:"Filename",value:e.entry.filename}).then((function(n){return t.commander.execute("tree.rename",{entry:e.entry,filename:n})})).catch((function(e){return e instanceof Error?t.toast.error(e.message):null}))}},{key:"commandTreeCreateDirectory",value:function(e){return e.parent.createDirectory(e.filename)}},{key:"commandTreeCreateFile",value:function(e){return e.parent.createFile(e.filename)}},{key:"commandTreeDelete",value:function(e){return e.entry.remove()}},{key:"commandTreeRename",value:function(e){return e.entry.rename(e.filename)}},{key:"commandWorkspaceClose",value:function(e){return this.onTogglePane({event:"close",pane:e.pane}),this.panes.close(e.pane)}},{key:"commandWorkspaceFocus",value:function(e){return this.panes.focus(e.pane,{selection:e.selection})}},{key:"commandWorkspaceMove",value:function(e){var t=this;return this.panes.move(e.pane,{after:e.after,before:e.before,replace:e.replace}).then((function(n){var r=!0===e.focus?null:e.focus;return e.focus?t.commander.execute("workspace.focus",{pane:n,selection:r}):n}))}},{key:"commandWorkspaceOpen",value:function(e){var t=this;return this.panes.open(e.entry,{after:e.after,before:e.before,options:e.options,replace:e.replace,type:e.type}).then((function(n){var r=!0===e.focus?null:e.focus;return t.onTogglePane({event:"open",pane:n}),e.replace&&t.onTogglePane({event:"close",pane:e.replace}),e.focus?t.commander.execute("workspace.focus",{pane:n,selection:r}):n}))}},{key:"loadAllTypings",value:function(){var e=this;if(this.typingsLoaded=!1,c.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!0,noSyntaxValidation:!1}),this.tree.get("package.json"))return this.typingsRpc.getRemoteApi().then((function(e){return e.loadAllTypings()})).then((function(t){for(var n in t){var r=c.Uri.file("/".concat(e.tree.id).concat(n)).toString(!0);c.languages.typescript.typescriptDefaults.addExtraLib(t[n],r)}c.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!1,noSyntaxValidation:!1}),e.typingsLoaded=!0}),(function(e){console.log(e.stack)}));this.typingsLoaded=!0}},{key:"updateCompilerOptions",value:function(){var e={noEmit:!1,allowJs:!0,allowSyntheticDefaultImports:!0,esModuleInterop:!0,experimentalDecorators:!0,isolatedModules:!1,jsx:c.languages.typescript.JsxEmit.React,jsxFactory:"React.createElement",lib:["dom","esnext"]},t=M({},e),n=M({},e),r={allowNonTsExtensions:!0,module:c.languages.typescript.ModuleKind.System,moduleResolution:c.languages.typescript.ModuleResolutionKind.NodeJs,noEmit:!1,outDir:"/".concat(this.tree.id,".dist"),target:c.languages.typescript.ScriptTarget.ES2016,typeRoots:["node_modules/@types"],rootDir:c.Uri.file("/".concat(this.tree.id)).toString(!0)},o=this.tree.get("tsconfig.json");if(o){var a=o.toJSON();try{var i=JSON.parse(a.content);i&&"object"===D(i)&&Object.assign(n,i.compilerOptions||{})}catch(e){}}var s=this.tree.get("jsconfig.json");if(s){var l=s.toJSON();try{var u=JSON.parse(l.content);u&&"object"===D(u)&&Object.assign(t,u.compilerOptions||{})}catch(e){}}c.languages.typescript.javascriptDefaults.setCompilerOptions(M(M({},t),r)),c.languages.typescript.typescriptDefaults.setCompilerOptions(M(M({},n),r))}}]),t}(),controllerAs:"$ctrl",scope:{},require:{editorCtrl:"^^?plunkerEditor",embedCtrl:"^^?plunkerEmbed"},bindToController:{history:"<ideHistory",onTogglePane:"&ideOnTogglePane",previewPaneType:"<?idePreviewPaneType",sidebarCurrentId:"<ideSidebarCurrentId",sidebarEntryId:"<ideSidebarEntryId",sidebarOnHistoryClick:"&ideSidebarOnHistoryClick",sidebarOnHistoryClickRemove:"&ideSidebarOnHistoryClickRemove",sidebarPanes:"<ideSidebarPanes",sidebarSize:"<ideSidebarSize",tree:"<ideTree"},transclude:{sidebarFooter:"?sidebarFooter",sidebarProjectPane:"?sidebarProjectPane",sidebarTreeHeader:"?sidebarTreeHeader"}}}]).name}).call(this,n(1020))},1020:function(e,t,n){e.exports=n.p+"e0599c460f56a1f627f7.worker.js"},1047:function(e,t){e.exports='<div class=plunker-tree-directory> <div class=plunker-tree-wrap ng-click=$ctrl.onClickInternal($event) ng-contextmenu="$ctrl.onContextmenu({ entry: $ctrl.entry, $event: $event })" ng-style="{\n            \'padding-left\': 1 + $ctrl.entry.route.length + \'em\'\n        }" ng-class="{\n            \'plunker-tree-expanded\': $ctrl.expanded,\n            \'plunker-tree-dirty\': !$ctrl.entry.isClean(),\n        }" drag-container drag-data=$ctrl.entry on-drag-start="$ctrl.onDragStart($event, $dragData)" drop-container drop-accepts="$ctrl.acceptsDrop($event, $dragData)" on-drop="$ctrl.onDrop($event, $dragData)"> <span class=plunker-tree-icon></span> <span class=plunker-tree-filename title="{{ $ctrl.entry.filename }}">{{ $ctrl.entry.filename }}</span> </div> <div class=plunker-tree-children ng-if=$ctrl.expanded> <div class=plunker-tree-child ng-repeat="entry in $ctrl.entry.children | orderBy:$ctrl.getOrderedFilename track by entry.filename" ng-switch=entry.type> <plunker-tree-file ng-switch-when=file entry=entry active-entry=$ctrl.activeEntry on-click="$ctrl.onClick({ entry: entry, $event: $event })" on-contextmenu="$ctrl.onContextmenu({ entry: entry, $event: $event })"></plunker-tree-file> <plunker-tree-directory ng-switch-when=directory entry=entry active-entry=$ctrl.activeEntry ng-if=!$ctrl.isHidden(entry) on-click="$ctrl.onClick({ entry: entry, $event: $event })" on-contextmenu="$ctrl.onContextmenu({ entry: entry, $event: $event })"></plunker-tree-directory> </div> </div> </div> '},1048:function(e,t){e.exports='<div class=plunker-tree-file> <div class=plunker-tree-wrap ng-click="$ctrl.onClick({ entry: $ctrl.entry, $event: $event })" ng-contextmenu="$ctrl.onContextmenu({ entry: $ctrl.entry, $event: $event })" ng-style="{\n            \'padding-left\': 1 + $ctrl.entry.route.length + \'em\'\n        }" ng-class="{\n            \'plunker-tree-active\': $ctrl.activeEntry === $ctrl.entry,\n            \'plunker-tree-dirty\': !$ctrl.entry.isClean(),\n        }" drag-container drag-data=$ctrl.entry on-drag-start="$ctrl.onDragStart($event, $dragData)" on-drag-end="$ctrl.onDragEnd($event, $dragData)" drop-container drop-accepts="$ctrl.acceptsDrop($event, $dragData)" on-drop="$ctrl.onDrop($event, $dragData)"> <span class=plunker-tree-icon></span> <span class=plunker-tree-filename title="{{ $ctrl.entry.filename }}">{{ $ctrl.entry.filename }}</span> </div> </div> '},1049:function(e,t){e.exports='<div class=plunker-file-tree> <plunker-tree-directory active-entry=$ctrl.activeEntry entry=$ctrl.entry hidden-folders=$ctrl.hiddenFolders on-click="$ctrl.onClick({ entry: entry, $event: $event })" on-contextmenu="$ctrl.onContextmenu({ entry: entry, $event: $event })"></plunker-tree-directory> </div> '},1050:function(e,t,n){},1051:function(e,t){e.exports="<div class=plunker-pane-code></div> "},1052:function(e,t){e.exports="<div class=plunker-pane-image></div> "},1061:function(e,t){e.exports='<div class=plunker-pane-preview> <div class=plunker-preview-nav ng-show="!$ctrl.loading && $ctrl.started"> <button class=plunker-preview-back ng-disabled=!$ctrl.history.currentIdx ng-click=$ctrl.onClickBack() plunker-hotkey=ide.preview.back></button> <button class=plunker-preview-forward ng-disabled="$ctrl.history.size && $ctrl.history.currentIdx >= $ctrl.history.size - 1" ng-click=$ctrl.onClickForward() plunker-hotkey=ide.preview.forward></button> <button class=plunker-preview-refresh ng-disabled=!$ctrl.currentUrl ng-click=$ctrl.onClickRefresh() plunker-hotkey=ide.preview.refresh></button> <input class=plunker-preview-url type=text ng-model=$ctrl.getSetUrl ng-model-options="{ getterSetter: true, updateOn : \'change blur\' }"/> <button class=plunker-preview-popout ng-click=$ctrl.onClickPopout($event) plunker-hotkey=ide.preview.popout></button> <button class=plunker-preview-copyurl plunker-copy-to-clipboard="{{ $ctrl.currentUrl }}" uib-tooltip="Copy url to the clipboard" tooltip-append-to-body=true tooltip-placement="auto top"></button> </div> <div class=plunker-preview-wrap ng-class="{\n            refreshing: $ctrl.loading && $ctrl.started,\n            resizing: $ctrl.dragData,\n        }"> <button class=plunker-preview-start ng-if=!$ctrl.started ng-click=$ctrl.start() tabindex=0> <span>Click to run</span> <kbd ng-if=$ctrl.refreshHotkey>{{$ctrl.refreshHotkey}}</kbd> </button> </div> <div class=plunker-preview-feedback ng-if=$ctrl.logEntries.length> <div class="plunker-preview-entry plunker-preview-{{ entry.level }}" ng-repeat="entry in $ctrl.logEntries"> <div class=plunker-preview-message>{{ entry.stack || entry.message }}</div> </div> </div> </div> '},1062:function(e,t){e.exports='<div class=plunker-pane-webtask> <div class=plunker-preview-nav> <button class=plunker-preview-refresh ng-click=$ctrl.onClickRefresh($event) plunker-hotkey=ide.preview.refresh></button> <input class=plunker-preview-url type=text ng-click=$event.target.select() ng-value=$ctrl.pane.entry.projectMetadata.webtask.url readonly=readonly /> <button class=plunker-preview-popout ng-click=$ctrl.onClickPopout($event) plunker-hotkey=ide.preview.popout></button> <button class=plunker-preview-copyurl plunker-copy-to-clipboard="{{ $ctrl.pane.entry.projectMetadata.webtask.url }}" uib-tooltip="Copy url to the clipboard" tooltip-append-to-body=true tooltip-placement="auto top"></button> </div> <div class=plunker-preview-wrap ng-class="{\n            refreshing: $ctrl.refreshing,\n        }"> <button class=plunker-preview-start ng-if=!$ctrl.iframe ng-click=$ctrl.refresh($event) tabindex=0> Click to run </button> </div> <div class=plunker-preview-logs> <button class=plunker-logs-clear ng-click=$ctrl.clearLogs($event) uib-tooltip="Clear the logs" tooltip-append-to-body=true tooltip-placement="auto top"></button> </div> </div> '},1063:function(e,t){e.exports='<div class=plunker-pane-wrap ng-class="{\n        \'plunker-pane-focused\': $ctrl.hasFocus\n    }" ng-switch=$ctrl.pane.type drop-container drop-accepts="$ctrl.acceptsDrop($event, $dragData)"> <div drop-target=center on-drop="$ctrl.onDrop($event, $dragData, \'center\')"></div> <div drop-target=right on-drop="$ctrl.onDrop($event, $dragData, \'right\')"></div> <div drop-target=left on-drop="$ctrl.onDrop($event, $dragData, \'left\')"></div> <div class=plunker-pane-header ng-click=$ctrl.onClickHeader($event)> <div class=plunker-pane-title drag-container drag-data=$ctrl.pane> <span title="{{ $ctrl.strategy.getTitle() }}"> {{ $ctrl.strategy.getTitle() }} </span> </div> <div class=plunker-pane-ops> <div class=plunker-pane-op ng-repeat="op in $ctrl.ops | orderBy:\'order\'" ng-if=!op.isHidden() ng-switch=op.type> <button class="{{ op.className }}" ng-switch-when=callback ng-click="$ctrl.onClickOp($event, op)" uib-tooltip="{{ op.tooltip }}" tooltip-placement="auto top" tooltip-append-to-body=true></button> <button class="{{ op.className }}" ng-switch-when=command plunker-hotkey="{{ op.command }}" ng-click=op.handler($event)></button> </div> </div> </div> <plunker-pane-code class=plunker-pane-body ng-switch-when=code pane=$ctrl.pane></plunker-pane-code> <plunker-pane-image class=plunker-pane-body ng-switch-when=image pane=$ctrl.pane></plunker-pane-image> <plunker-pane-preview class=plunker-pane-body ng-switch-when=preview pane=$ctrl.pane></plunker-pane-preview> <plunker-pane-webtask class=plunker-pane-body ng-switch-when=webtask pane=$ctrl.pane></plunker-pane-webtask> </div> '},1064:function(e,t,n){},1065:function(e,t){e.exports='<div class=plunker-panes-wrap ng-class="{\n        \'plunker-panes-empty\': !$ctrl.panes.length,\n        \'plunker-panes-resizing\': $ctrl.dragData,\n    }"> <div class=plunker-panes-pane ng-repeat="pane in $ctrl.panes" ng-style="{\n            \'flex-basis\': $ctrl.getBasis($index),\n        }"> <plunker-pane pane=pane is-first=$first is-last=$last is-loading=$ctrl.isLoading on-close="$ctrl.onClosePane({ $event: $event, pane: pane })"></plunker-pane> <div class=plunker-resize-handle ng-class="{\n                \'plunker-resize-active\': $ctrl.dragData.index === $index,\n            }" ng-repeat-end ng-if=!$last ng-mousedown="$ctrl.onMouseDown($event, $index)" ng-mousemove="$ctrl.onMouseMove($event, $index)" ng-mouseup="$ctrl.onMouseUp($event, $index)"></div> </div> </div> '},1066:function(e,t,n){},1067:function(e,t,n){"use strict";n(8);var r=n(6),o=n.n(r),a=n(34),i=n.n(a),s=n(641),c=n(51),l=n.n(c),u=n(170),p=n(924),d=n(244),f=n(153),m=n(52),h=n(665),y=n(1068),v=n.n(y);n(1069);t.a=o.a.module("plunker.component.sidebar",[i.a,u.a,p.a,d.a,f.a,m.a,h.a]).directive("plunkerSidebar",[function(){return{restrict:"E",replace:!0,template:v.a,controller:"PlunkerSidebarComponentController as $ctrl",scope:{},bindToController:{activeEntry:"<sidebarActiveEntry",currentId:"<sidebarCurrentId",entryId:"<sidebarEntryId",history:"<sidebarHistory",panes:"<sidebarPanes",size:"<sidebarSize",tree:"<sidebarTree",hiddenFolders:"<sidebarTreeHiddenFolders",onClickCreateFile:"&sidebarOnClickCreateFile",onClickCreateDirectory:"&sidebarOnClickCreateDirectory",onHistoryClick:"&sidebarOnHistoryClick",onHistoryClickRemove:"&sidebarOnHistoryClickRemove",onTreeClick:"&sidebarOnTreeClick",onTreeContextmenu:"&sidebarOnTreeContextmenu"},require:{ideCtrl:"^^plunkerIde"}}}]).directive("plunkerSidebarTransclude",[function(){var e={content:"append",element:"replaceWith"};return{restrict:"EA",require:{ideCtrl:"^^plunkerIde"},link:function(t,n,r,o){var a=o.ideCtrl.$transclude,i=r.plunkerSidebarTransclude||r.slot,s=e[r.plunkerSidebarTransclude?"content":"element"];a.isSlotFilled(i)&&s&&a((function(e){return n.empty()[s](e)}),null,i)}}}]).controller("PlunkerSidebarComponentController",["$element","$q","$scope","$window","commander","preferences",function(e,t,n,r,o,a){var i=this,c={tree:{commandId:"sidebar.tree"},project:{commandId:"sidebar.project"},history:{commandId:"sidebar.history"},config:{commandId:"sidebar.config"}};i.configOptions={},i.dragData=null,i.sidebarPaneWidth=250,i.$onInit=function(){i.configOptions.themes=[{type:"Dark themes",caption:"High contrast-black",name:"hc-black"},{type:"Dark themes",caption:"Visual studio dark",name:"vs-dark"},{type:"Light themes",caption:"Visual studio",name:"vs"}]},i.$onChanges=function(e){e.panes&&e.panes.currentValue&&(i.panes=i.panes.map((function(e){var t=c[e];return t||console.error("Unsupported sidebar pane `%s`",e),l.a.defaults({},t,{id:e})})))},i.$onDestroy=function(){r.removeEventListener("mousemove",p,!0),r.removeEventListener("mouseup",d,!0)},i.$postLink=function(){r.addEventListener("mousemove",p,!0),r.addEventListener("mouseup",d,!0),o.createCommand({name:"sidebar.config",description:"Show / hide the editor settings pane",hotkeys:s.KeyMod.Alt|s.KeyCode.US_SLASH,scope:n,defaults:{id:"config"},handler:f}),o.createCommand({name:"sidebar.project",description:"Show / hide this project's settings",hotkeys:s.KeyMod.Alt|s.KeyCode.KEY_E,scope:n,defaults:{id:"project"},handler:f}),o.createCommand({name:"sidebar.history",description:"Show /hide the list of recent projects",hotkeys:s.KeyMod.Alt|s.KeyCode.KEY_H,scope:n,defaults:{id:"history"},handler:f}),o.createCommand({name:"sidebar.show",description:"Toggle a sidebar pane",scope:n,handler:f}),o.createCommand({name:"sidebar.tree",description:"Show / hide the project's file tree",hotkeys:s.KeyMod.Alt|s.KeyCode.KEY_F,scope:n,defaults:{id:"tree"},handler:f})},i.getSetPreference=function(e){return function(t){return void 0===t?a.get(e):a.set(e,t)}},i.onClickSidebarSelector=function(e,t){o.execute(t.commandId)},i.onResizeStart=function(t){t.preventDefault(),t.stopPropagation();var n=e.children().eq(1)[0].offsetWidth;i.dragData={width:n,start:{screenX:t.screenX,screenY:t.screenY,width:n},last:{screenX:t.screenX,screenY:t.screenY}}};var u=l.a.throttle(m,1e3/120);function p(e){i.dragData&&(e.preventDefault(),n.$apply(l.a.partial(u,e)))}function d(e){i.dragData&&(e.preventDefault(),n.$apply((function(){m(e),i.dragData=null})))}function f(e){i.currentId=i.currentId!==e.id?e.id:null}function m(e){if(i.dragData){var t=i.dragData.width,n=e.screenX-i.dragData.start.screenX;t+n<200&&(n+=Math.abs(t+n-200)),i.sidebarPaneWidth=i.dragData.width+n,i.dragData.last.screenX=e.screenX,i.dragData.last.screenY=e.screenY}}}]).name},1068:function(e,t){e.exports='<div class="plunker-sidebar-component plunker-sidebar-{{ $ctrl.size }}" ng-class="{\n        \'plunker-sidebar-closed\': !$ctrl.currentId,\n        \'plunker-sidebar-open\': $ctrl.currentId,\n    }"> <div class=plunker-sidebar-selectors> <button class="plunker-sidebar-selector plunker-selector-{{ pane.id }}" ng-repeat="pane in $ctrl.panes" ng-class="{\n                \'plunker-selector-active\': $ctrl.currentId === pane.id,\n            }" ng-click="$ctrl.onClickSidebarSelector($event, pane)" plunker-hotkey="{{ pane.commandId }}"></button> </div> <div class=plunker-sidebar-panes ng-switch=$ctrl.currentId ng-class="{\n            \'plunker-sidebar-resizing\': $ctrl.dragData,\n        }" ng-style="{\n            width: $ctrl.sidebarPaneWidth + \'px\',\n        }"> <div class="plunker-sidebar-pane plunker-sidebar-tree" ng-switch-when=tree> <plunker-sidebar-transclude slot=sidebarTreeHeader></plunker-sidebar-transclude> <plunker-tree class=plunker-project-tree tree=$ctrl.tree tree-active-entry=$ctrl.activeEntry tree-hidden-folders=$ctrl.hiddenFolders tree-on-click="$ctrl.onTreeClick({ entry: entry, $event: $event })" tree-on-contextmenu="$ctrl.onTreeContextmenu({ entry: entry, $event: $event })"></plunker-tree> </div> <div class="plunker-sidebar-pane plunker-sidebar-history" ng-switch-when=history> <h2 class=plunker-sidebar-header>Recent projects</h2> <p> This pane contains a listing of the projects that you recently worked on. For saved projects you can see the version history as well as any unsaved changes. </p> <div class=plunker-history-list> <div class="plunker-history-item plunker-history-{{ entry.type }}" ng-class="{\n                        \'plunker-history-active\': entry.id === $ctrl.entryId\n                    }" ng-click="$ctrl.onHistoryClick({ $event: $event, entry: entry })" ng-repeat="entry in $ctrl.history track by entry.id"> <button class=close ng-if=$index ng-click="$ctrl.onHistoryClickRemove({ $event: $event, entry: entry })" uib-tooltip="Delete this entry from your recent sessions" tooltip-placement="auto top" tooltip-append-to-body=true> &times; </button> <h3 class=plunker-history-header> <span class=plunker-history-title ng-if=entry.title>{{ entry.title }}</span> <span class=plunker-history-untitled ng-if=!entry.title>Untitled project</span> <span class=plunker-history-dirty ng-if=entry.dirty uib-tooltip="This session had unsaved changes" tooltip-placement="auto top" tooltip-append-to-body=true></span> </h3> <div class=plunker-history-meta> <plunker-timeago class=plunker-history-updated time=entry.updatedAt></plunker-timeago> </div> <ul class=plunker-history-tags ng-if=entry.tags.length> <li class=plunker-history-tag ng-repeat="tag in entry.tags"> <span>{{ ::tag }}</span> </li> </ul> </div> </div> </div> <div class="plunker-sidebar-pane plunker-sidebar-project" ng-switch-when=project plunker-sidebar-transclude=sidebarProjectPane></div> <div class="plunker-sidebar-pane plunker-sidebar-config" ng-switch-when=config> <form novalidate> <fieldset> <legend class=plunker-sidebar-header>Code editor</legend> <div class=form-group> <label for=config_editor_theme>Theme</label> <select id=config_editor_theme class=form-control name=editor.theme ng-model="$ctrl.getSetPreference(\'editor.theme\')" ng-model-options="{\n                                getterSetter: true,\n                            }" ng-options="entry.name as entry.caption group by entry.type for entry in $ctrl.configOptions.themes" plunker-autofocus> </select> </div> <div class=form-group> <label for=config_editor_fontSize>Font size</label> <input id=config_editor_fontSize class=form-control type=number name=editor.fontSize ng-model="$ctrl.getSetPreference(\'editor.fontSize\')" ng-model-options="{\n                                getterSetter: true,\n                            }" min=6 max=30 /> </div> <div class=checkbox> <label> <input id=config_editor_showGutter type=checkbox name=editor.showGutter ng-model="$ctrl.getSetPreference(\'editor.showGutter\')" ng-model-options="{\n                                    getterSetter: true,\n                                }"/> show line numbers </label> </div> <div class=checkbox> <label> <input id=config_editor_wordWrap type=checkbox name=editor.wordWrap ng-model="$ctrl.getSetPreference(\'editor.wordWrap\')" ng-model-options="{\n                                    getterSetter: true,\n                                }"/> automatically wrap long lines </label> </div> </fieldset> <fieldset> <legend class=plunker-sidebar-header>Previewer</legend> <div class=form-group> <label for=config_preview_refreshInterval>Refresh interval</label> <input id=config_preview_refreshInterval class=form-control type=number name=preview.refreshInterval ng-disabled="!$ctrl.getSetPreference(\'preview.autoRefresh\')()" ng-model="$ctrl.getSetPreference(\'preview.refreshInterval\')" ng-model-options="{\n                                getterSetter: true,\n                            }" min=100 /> <p class=help-block> Enter how many milliseconds Plunker should wait after your last change before refreshing the preview. </p> </div> <div class=checkbox> <label> <input type=checkbox name=preview.autoRefresh ng-model="$ctrl.getSetPreference(\'preview.autoRefresh\')" ng-model-options="{\n                                    getterSetter: true,\n                                }"/> refresh the preview automatically </label> </div> </fieldset> </form> </div> <div class=plunker-sidebar-resize ng-class="{\n                \'plunker-sidebar-resizing\': $ctrl.dragData,\n            }" ng-mousedown=$ctrl.onResizeStart($event)></div> <plunker-sidebar-transclude slot=sidebarFooter></plunker-sidebar-transclude> </div> </div> '},1069:function(e,t,n){},1070:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));n(71),n(24),n(7);var r,o,a=n(786);function i(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,c,"next",e)}function c(e){i(a,r,o,s,c,"throw",e)}s(void 0)}))}}function c(e,t){return l.apply(this,arguments)}function l(){return(l=s(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:return r=e.sent,e.next=5,r.format(t,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return o||(o=new Worker(e,void 0)),r||(r=new a.a({},{isChild:!1,registerMessageListener:function(e){return o.onmessage=function(t){return e(t.data)},function(){}},sendMessage:function(e){o.postMessage(e)}})),r.getRemoteApi()}}).call(this,n(1071))},1071:function(e,t,n){e.exports=n.p+"d2655836e162e4bf9545.worker.js"},1136:function(e,t){e.exports='<form name=pickerForm ng-submit=$ctrl.resolve($ctrl.formData) novalidate> <div class=modal-header> <button type=button class=close ng-click="$ctrl.reject(\'close button\')"> <span aria-hidden=true>&times;</span><span class=sr-only>Close</span> </button> <h3 class=modal-title>Add package files</h3> </div> <div class=modal-body> <h2> {{ $ctrl.packageJson.name }} <small><code>{{ $ctrl.packageJson.version }}</code></small> </h2> <p> Select the files that you would like to import to your project. You can choose whether you would like the <abbr title="Either script or link tags">html tags</abbr> to be added at: </p> <div class=form-group> <label class=radio-inline> <input type=radio name=target value=head ng-model=$ctrl.formData.target /> the end of the <code>&lt;/head&gt;</code> tag </label> <label class=radio-inline> <input type=radio name=target value=body ng-model=$ctrl.formData.target /> the end of the <code>&lt;/body&gt;</code> tag </label> <label class=radio-inline> <input type=radio name=target value=cursor ng-model=$ctrl.formData.target /> the current cursor position </label> <label class=radio-inline> <input type=radio name=target value=none ng-model=$ctrl.formData.target /> only add to <code>package.json</code> </label> </div> <div class=form-group> <select class=form-control name=assets multiple=multiple required size=10 ng-dblclick=$ctrl.onDoubleClickFile($event) ng-model=$ctrl.formData.assets ng-options="asset as asset.pathname group by asset.type for asset in $ctrl.assets" plunker-autofocus></select> </div> </div> <div class=modal-footer> <button type=button class="btn btn-danger" ng-click="$ctrl.reject(\'cancel button\')"> Cancel </button> <button type=submit plunker-autofocus class="btn btn-success">Import</button> </div> </form> '},1137:function(e,t){e.exports='<form name=searchForm ng-submit=$ctrl.onSubmit($ctrl.activeResult) novalidate> <div class=modal-header> <button type=button class=close ng-click="$ctrl.reject(\'close button\')"> <span aria-hidden=true>&times;</span><span class=sr-only>Close</span> </button> <h3 class=modal-title>Search for packages</h3> </div> <div class=modal-body> <input class=plunker-npmsearch-input type=search plunker-autofocus placeholder="Search packages..." ng-change=$ctrl.onChangeInput($ctrl.input) ng-keydown=$ctrl.onKeyDown($event) ng-model=$ctrl.input ng-model-options="{\n                debounce: 500,\n                updateOn: \'keyup\',\n            }"/> <input type=hidden ng-model=$ctrl.activeResult required/> <div class=plunker-npmsearch-results ng-if=$ctrl.results id=packageSearchResults> <div class=plunker-npmsearch-result ng-repeat="result in $ctrl.results" ng-focus="$ctrl.onFocus($event, result)" ng-class="{\n                    \'plunker-npmsearch-active\': result === $ctrl.activeResult,\n                }"> <h4 class=plunker-npmsearch-title ng-click=$ctrl.onClickPackage(result)> <span>{{ result.name }}</span> <small><code>{{ result.version }}</code></small> </h4> <p plunker-markdown=result.description></p> <div class=plunker-npmsearch-tags> <div class=plunker-npmsearch-tag ng-repeat="keyword in result.keywords track by $index" ng-click=$ctrl.onClickTag(keyword)> {{ keyword }} </div> </div> </div> <uib-pagination ng-if=$ctrl.totalItems max-size=5 items-per-page=$ctrl.itemsPerPage total-items=$ctrl.totalItems ng-model=$ctrl.currentPage ng-change="$ctrl.search($ctrl.input, $ctrl.currentPage)"></uib-pagination> </div> <div class=plunker-npmsearch-hint ng-if="!$ctrl.results && !$ctrl.request"> <h3>Search for packages</h3> <p> Plunker allows you to easily add packages from <a href=https://npmjs.com rel=noopener target=_blank>npm</a> to your project. The search results are provided using <a href=http://npms.io rel=noopener target=_blank>npms.io</a> and the injected assets are hosted on <a href=https://unpkg.com rel=noopener target=_blank>unpkg</a>. </p> <p>Start typing what you are looking for and the results will appear shortly.</p> </div> <div class=plunker-npmsearch-loading ng-if="!$ctrl.results && $ctrl.request"> <h3>Searching...</h3> <div class=plunker-npmsearch-spinner></div> </div> </div> <div class=modal-footer> <button type=button class="btn btn-danger" ng-click="$ctrl.reject(\'cancel button\')"> Cancel </button> </div> </form> '},1138:function(e,t,n){},1139:function(e,t){e.exports='<div class=plunker-ide-component ng-class="{\n        \'plunker-sidebar-open\': !!$ctrl.sidebarCurrentId,\n    }"> <plunker-sidebar class=plunker-ide-sidebar sidebar-active-entry=$ctrl.getActiveEntry() sidebar-current-id=$ctrl.sidebarCurrentId sidebar-entry-id=$ctrl.sidebarEntryId sidebar-panes=$ctrl.sidebarPanes sidebar-size=$ctrl.sidebarSize sidebar-tree=$ctrl.tree sidebar-tree-hidden-folders=$ctrl.hiddenFolders sidebar-history=$ctrl.history sidebar-on-click-create-file="$ctrl.onClickCreateFile($event, entry)" sidebar-on-click-create-directory="$ctrl.onClickCreateDirectory($event, entry)" sidebar-on-history-click="$ctrl.sidebarOnHistoryClick({ $event: $event, entry: entry })" sidebar-on-history-click-remove="$ctrl.sidebarOnHistoryClickRemove({ $event: $event, entry: entry })" sidebar-on-tree-click="$ctrl.onTreeClick($event, entry)" sidebar-on-tree-contextmenu="$ctrl.onTreeContextmenu($event, entry)"> <sidebar-tree-header ng-transclude=sidebarTreeHeader></sidebar-tree-header> <sidebar-footer> <div ng-transclude=sidebarFooter></div> </sidebar-footer> </plunker-sidebar> <div class=plunker-ide-workspace> <plunker-panes panes=$ctrl.workspace tree=$ctrl.tree on-close-pane="$ctrl.onPaneClickClose($event, pane)"></plunker-panes> </div> </div> '},1140:function(e,t,n){},1141:function(e,t){e.exports='<div class=plunker-tags-input ng-class="{\n        \'focus\': vm.hasFocus,\n        \'has-error\': vm.ngModel.$invalid\n    }" ng-click=vm.handleClick($event)> <div class=plunker-tag-item ng-blur="vm.handleBlurTag($event, $index)" ng-click="vm.handleFocusTag($event, $index)" ng-keydown="vm.handleTagKeyDown($event, $index)" ng-repeat="tag in vm.ngModel.$modelValue" tabindex=-1> <span class=plunker-tag-name>{{ ::tag }}</span> <button type=button class=plunker-tag-remove ng-click="vm.handleRemoveTag($event, $index)"> &times; </button> </div> <input class=plunker-tag-input ng-blur=vm.handleBlur($event) ng-focus=vm.handleFocus($event) ng-keydown=vm.handleKeyDown($event) ng-keyup=vm.handleKeyUp($event) ng-value=vm.input ng-required="{{ vm.required }}" placeholder="{{ vm.placeholder }}"/> </div> '},1142:function(e,t,n){},1144:function(e,t){e.exports='<div class=plunker-editor-component ng-class="{\n        \'plunker-sidebar-autoclose\': $ctrl.autoCloseSidebar,\n    }"> <plunker-ide ng-show=$ctrl.project ide-on-toggle-pane="$ctrl.onTogglePane({ event, pane })" ide-preview-pane-type=$ctrl.previewPaneType ide-sidebar-current-id=$ctrl.sidebar.currentId ide-sidebar-on-history-click="$ctrl.onClickHistoryEntry($event, entry)" ide-sidebar-on-history-click-remove="$ctrl.onClickRemoveHistoryEntry($event, entry)" ide-sidebar-entry-id=$ctrl.project.entryId ide-sidebar-panes=$ctrl.sidebar.panes ide-sidebar-size=$ctrl.sidebar.size ide-tree=$ctrl.project.tree ide-history=$ctrl.history> <sidebar-tree-header class=plunker-plunk-wrap ng-if=$ctrl.project.isSaved()> <h1 class=plunker-plunk-title> <plunker-plunk-star plunk-id=$ctrl.project.plunk.id on-change=$ctrl.onChangeStar()></plunker-plunk-star> {{ $ctrl.project.plunk.title }} <span class=plunker-plunk-parent ng-if=$ctrl.project.plunk.fork_of> <span>Fork of</span> <plunker-inline-plunk plunk="{ id: $ctrl.project.plunk.fork_of }"> {{ $ctrl.project.plunk.fork_of }} </plunker-inline-plunk> </span> </h1> <ul class=plunker-plunk-tags ng-if=$ctrl.project.plunk.tags.length> <li class=plunker-plunk-tag ng-repeat="tag in $ctrl.project.plunk.tags"> <a ui-sref="collections({ tags: tag })">{{ ::tag }}</a> </li> </ul> <div class=plunker-plunk-meta> <plunker-inline-user class=plunker-plunk-user ng-if=$ctrl.project.plunk.user user=$ctrl.project.plunk.user>{{ $ctrl.project.plunk.user.username }}</plunker-inline-user> <span class="plunker-plunk-user plunker-user-anonymous" ng-if=!$ctrl.project.plunk.user>Anonymous</span> <plunker-timeago class=plunker-plunk-updated time=$ctrl.project.plunk.updated_at></plunker-timeago> </div> <div class=plunker-plunk-stats> <span class=plunker-plunk-stat uib-tooltip="This plunk has been viewed {{ ::$ctrl.project.plunk.views_count || 0 | number:0 }} time(s)." tooltip-placement="auto top" tooltip-append-to-body=true> <i class="fa fa-eye"></i>{{ ::$ctrl.project.plunk.views_count || 0 | shortenNumber }} </span> <span class=plunker-plunk-stat uib-tooltip="This plunk has been forked {{ ::$ctrl.project.plunk.forks_count || 0 | number:0 }} time(s)." tooltip-placement="auto top" tooltip-append-to-body=true> <i class="fa fa-code-fork"></i>{{ ::$ctrl.project.plunk.forks_count || 0 | shortenNumber }} </span> <span class=plunker-plunk-stat uib-tooltip="This plunk is starred by {{ $ctrl.project.plunk.stars_count || 0 | number:0 }} people." tooltip-placement="auto top" tooltip-append-to-body=true> <i class="fa fa-heart"></i>{{ $ctrl.project.plunk.stars_count || 0 | shortenNumber }}</span> </div> </sidebar-tree-header> <sidebar-project-pane class=plunker-sidebar-project ng-if=$ctrl.canEdit()> <form novalidate> <fieldset> <legend class=plunker-sidebar-header>Project settings</legend> <div class=form-group> <label for=project-title>Title:</label> <input id=project-title autofocus name=title type=text class=form-control placeholder="Describe your plunk" autofocus ng-change=$ctrl.updatePlunk() ng-disabled=$ctrl.projectSaving ng-model=$ctrl.project.plunk.title ng-model-options="{ updateOn: \'blur\' }" required/> </div> <div class=form-group> <label for=project-tags>Tags:</label> <plunker-tags-input id=project-tags placeholder="List tags" name=tags ng-change="$ctrl.updatePlunk(\'tags\')" ng-disabled=$ctrl.projectSaving ng-model=$ctrl.project.plunk.tags></plunker-tags-input> </div> <div class=form-group> <plunker-toggle disabled=$ctrl.project.plunk.template loading=$ctrl.projectSaving current-value=!$ctrl.project.plunk.private on-change="$ctrl.onClickTogglePublic($event, currentValue)" title="Allow this plunk to be discovered by other users">Make this plunk public</plunker-toggle> </div> <button class="btn btn-danger btn-xs" ng-click=$ctrl.onClickDelete($event) ng-disabled=$ctrl.projectSaving plunker-hotkey=editor.delete type=button> Delete plunk </button> </fieldset> </form> </sidebar-project-pane> <sidebar-footer> <plunker-ag-grid-sponsor></plunker-ag-grid-sponsor> </sidebar-footer> </plunker-ide> <div ui-view></div> </div> '},1145:function(e,t){e.exports='<form novalidate name=form ng-submit="$ctrl.onSubmit($event, $ctrl.data)"> <div class=modal-header> <button type=button class=close ng-click=$ctrl.onClickClose($event) aria-hidden=true> &times; </button> <h4>Save plunk</h4> </div> <div class=modal-body> <div class=form-group> <label for=project-title>Title:</label> <input id=project-title name=title type=text class=form-control placeholder="Describe your plunk" autofocus ng-model=$ctrl.data.title required/> </div> <div class=form-group> <label for=project-tags>Tags:</label> <plunker-tags-input id=project-tags placeholder="List tags" name=tags ng-model=$ctrl.data.tags></plunker-tags-input> </div> </div> <div class=modal-footer> <button type=button class="btn btn-link" ng-click=$ctrl.onClickCancel($event)> Cancel </button> <button type=submit class="btn btn-primary" ng-disabled=form.$invalid>Save</button> </div> </form> '},1146:function(e,t,n){},1147:function(e,t){e.exports='<div class="plunker-edit-footer plunker-full-width"> <plunker-ad class=plunker-ad-wrap app=next referrer=$ctrl.referrer template=bottom-bar></plunker-ad> <div class=plunker-about-wrap> <span class=plunker-about-copy>Plunker &copy; (2016-2020)</span> <a class=plunker-about-github href=https://github.com/plnkr/feedback/issues/new/choose target=_blank title="Submit a bug report or feature request"></a> <a class=plunker-about-twitter href=https://twitter.com/plnkrco target=_blank title="Follow Plunker on Twitter"></a> </div> </div> '},1176:function(e,t){e.exports='<div class=plunker-create-modal> <div class=modal-header> <button type=button class=close ng-click=$ctrl.reject()> <span aria-hidden=true>&times;</span> <span class=sr-only>Close</span> </button> <h3 class=modal-title>Select a type of project to create</h3> </div> <div class=modal-body> <div class=plunker-create-categories> <div class=plunker-create-category ng-if="!template.hidden || $ctrl.showHidden" ng-repeat="template in $ctrl.templateList" ng-click="$ctrl.onClick($event, template)" tabindex=-1> <img class=plunker-create-logo ng-src={{template.logoUrl}} /> <h3 class=plunker-create-name>{{template.name}}</h3> <p>{{template.description}}</p> </div> </div> </div> </div> '},1177:function(e,t,n){},1178:function(e,t){e.exports='<form novalidate name=form ng-submit=$ctrl.resolve($ctrl.model)> <div class=modal-header> <button type=button class=close ng-click="$ctrl.reject(\'canceled\')" aria-hidden=true> &times; </button> <h4>Import From Github Gist</h4> </div> <div class=modal-body> <div class=modal-hint> <p>Import any Github Gist by specifying the Gist\'s ID.</p> </div> <div class="form-group import-required"> <label for=import-id>Gist id:</label> <input id=import-id name=id type=text class=form-control placeholder=id autofocus ng-model=$ctrl.model.id required/> </div> </div> <div class=modal-footer> <button type=button class="btn btn-link" ng-click=$ctrl.reject()>Cancel</button> <button type=submit class="btn btn-primary" ng-disabled=form.$invalid>Import</button> </div> </form> '},1179:function(e,t){e.exports='<form novalidate name=form ng-submit=$ctrl.resolve($ctrl.model)> <div class=modal-header> <button type=button class=close ng-click="$ctrl.reject(\'canceled\')" aria-hidden=true> &times; </button> <h4>Import From Github</h4> </div> <div class=modal-body> <div class="form-group import-required"> <label for=import-username>Github username:</label> <input id=import-username name=username type=text class=form-control placeholder=username autofocus ng-model=$ctrl.model.user required/> </div> <div class="form-group import-required"> <label for=import-repo>Github repository name:</label> <input id=import-repo name=repo type=text class=form-control placeholder=repo ng-model=$ctrl.model.repo required/> </div> <div class="form-group import-required"> <label for=import-branch>Hashish (branch, tag or commit):</label> <input id=import-branch name=branch type=text class=form-control placeholder=master ng-model=$ctrl.model.hashish required/> </div> <div class=form-group> <label for=import-path>Subdirectory:</label> <input id=import-path name=path type=text class=form-control placeholder=/ ng-model=$ctrl.model.path /> <p class=help-block> When importing from a repo, only the contents of this directory will be used instead of the entire repository contents. </p> </div> </div> <div class=modal-footer> <button type=button class="btn btn-link" ng-click=$ctrl.reject()>Cancel</button> <button type=submit class="btn btn-primary" ng-disabled=form.$invalid>Import</button> </div> </form> '},1180:function(e,t){e.exports='<div class=modal-header> <button type=button class=close ng-click="$ctrl.reject(\'canceled\')" aria-hidden=true> &times; </button> <h4>Open a template</h4> </div> <div class=modal-body> <div class=modal-hint> <p> Templates are specially-formatted <em>Plunks</em> that are designed to be used as the starting point for new projects. Use the search box below to find the template you are looking for. </p> </div> <form class="form-group import-search" ng-submit="$ctrl.onSubmit($event, $ctrl.activeResult)"> <input id=import-search name=search type=search class=form-control placeholder="Search for a template..." autofocus ng-keydown=$ctrl.onKeyDown($event) ng-model=$ctrl.searchText ng-model-options="{\n                debounce: 500,\n                getterSetter: true,\n            }"/> </form> <div class=modal-error ng-if=$ctrl.error> <p>{{ $ctrl.error.message }}</p> </div> <div class=import-template-loading ng-if=$ctrl.loading> <p>Loading plunks...</p> </div> <div class=import-template-empty ng-if="!$ctrl.loading && !$ctrl.templates.length"> <p> Nothing found that matches the search criteria. Please try again with a different search. </p> </div> <div class=import-template-list ng-if=!$ctrl.loading> <div class=import-template-item ng-class="{\n                \'import-template-active\': template === $ctrl.activeResult,\n            }" ng-click="$ctrl.onClickTemplate($event, template)" ng-repeat="template in $ctrl.templates"> <h3 class=import-template-title> {{ ::template.title }} </h3> <div class=import-template-meta> <plunker-inline-user user=template.user ng-if=template.user>{{ template.user.username }}</plunker-inline-user> <span ng-if=!template.user>Anonymous</span> <plunker-timeago time=template.created_at></plunker-timeago> </div> <ul class=import-template-facets ng-if="template.tags.length || template.packages.length"> <li class=import-template-tag ng-repeat="tag in template.tags"> <a>{{ ::tag }}</a> </li> <li class=import-template-package ng-repeat="package in template.packages"> <a>{{ ::package.name }}@{{ ::package.semver }}</a> </li> </ul> </div> </div> </div> '},1181:function(e,t,n){},1183:function(e,t){e.exports='<div class=modal-header> <button type=button class=close ng-click="$ctrl.dismiss({ $value: \'Clicked close\' })" aria-hidden=true> &times; </button> <h4>Load a webtask</h4> </div> <div class=modal-body> <div class="alert alert-dismissable alert-{{alert.type || \'danger\'}}" close="$ctrl.alerts.splice($index, 1)" ng-repeat="alert in $ctrl.alerts" uib-alert> {{alert.message}} </div> <table class="plunker-wt-list table table-hover"> <thead> <tr> <th>Description</th> <th width=20%>Updated</th> <th width=80px>&nbsp;</th> </tr> </thead> <tbody class=plunk-wt-loading ng-if=$ctrl.loading> <tr> <td colspan=99>Loading&hellip;</td> </tr> </tbody> <tbody class=plunker-wt-items ng-if=$ctrl.webtasks.length> <tr class=plunker-wt-item ng-click="$ctrl.onClickWebtask($event, webtask)" ng-if=!$ctrl.loading ng-repeat="webtask in $ctrl.webtasks"> <td class=plunker-wt-desc>{{webtask.meta[\'plnkr-desc\'] || \'Untitled\'}}</td> <td class=plunker-wt-updated> <plunker-timeago time="+webtask.meta[\'plnkr-saved\'] || +webtask.meta[\'plnkr-created\']"></plunker-timeago> </td> <td class=plunker-wt-ops> <button class="btn btn-danger btn-xs" ng-click="$ctrl.onClickDeleteWebtask($event, webtask)"> Delete </button> </td> </tr> </tbody> </table> </div> <div class=modal-footer> <button type=button class="btn btn-link" ng-click="$ctrl.dismiss({ $value: \'Clicked cancel\' })"> Cancel </button> <button type=button class="btn btn-primary" ng-click=$ctrl.onClickCreate($event)> Create Webtask </button> </div> '},1184:function(e,t,n){},1185:function(e,t){e.exports="<div class=plunker-editor-tbleft> <div class=plunker-toolbar-group> <button class=plunker-toolbar-create ng-click=$ctrl.onClickCreate($event) plunker-hotkey=editor.create> <span>New</span> </button> <button class=plunker-toolbar-save ng-click=$ctrl.onClickSave($event) ng-if=$ctrl.canSave() plunker-hotkey=editor.save> <span>Save</span> </button> <button class=plunker-toolbar-fork ng-click=$ctrl.onClickFork($event) ng-if=$ctrl.canFork() plunker-hotkey=editor.fork> <span>Fork</span> </button> </div> </div> "},1186:function(e,t){e.exports='<div class=plunker-editor-tbright> <div class=plunker-toolbar-group> <button class=plunker-toolbar-preview ng-click=$ctrl.onClickTogglePreview($event) ng-class="{\n                        active: $ctrl.isPreviewActive(),\n                    }" plunker-hotkey=ide.preview.toggle> <span>Preview</span> </button> </div> </div> '},1255:function(e,t,n){"use strict";n(12),n(13),n(7),n(27),n(150),n(8);var r=n(6),o=n.n(r),a=n(708),i=n.n(a),s=n(51),c=n.n(s),l=(n(149),n(34)),u=n.n(l),p=n(924),d=n(244),f=n(888),m=n(52),h=n(664),y=(n(11),n(42),n(17),n(14),n(88),n(87),n(300)),v=n(641),g=n(665),k=n(1051),b=n.n(k);function w(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var C=o.a.module("plunker.component.pane.code",[m.a,g.a]).directive("plunkerPaneCode",["preferences",function(e){return e.define("editor.theme","vs"),e.define("editor.fontSize",13),e.define("editor.showGutter",!0),e.define("editor.wordWrap",!0),{restrict:"E",replace:!0,require:{ideCtl:"^^plunkerIde",paneCtl:"^^plunkerPane"},template:b.a,controller:"PlunkerCodePaneController as $ctrl",scope:{},bindToController:{pane:"<"}}}]).controller("PlunkerCodePaneController",["$element","$scope","commander","preferences",function(e,t,n,r){var o=this,a=[],i=[],s=null,l=null,u=null;o.$onDestroy=function(){o.pane.entry.strategy.viewState=o.editor.saveViewState(),c.a.forEach(a,(function(e){e()})),i.forEach((function(e){return e.dispose()})),o.editor.setModel(null),o.editor.dispose(),o.element=null,o.supportsFormatting=!1,g()},o.$onInit=function(){o.paneCtl.setStrategy(o),o.paneCtl.addOp({type:"command",command:"ide.beautifyCode",className:"plunker-ops-beautify",isHidden:function(){return!o.supportsFormatting}}),o.paneCtl.addOp({type:"command",command:"ide.insertPackage",className:"plunker-ops-npm"})},o.$postLink=function(){o.onBlur=p(o.onBlur,this),o.onFocus=p(o.onFocus,this),o.element=e[0],o.model=o.pane.entry.strategy.model;var t=v.editor.create(o.element,{dragAndDrop:!0,fontSize:r.get("editor.fontSize"),lineNumbers:r.get("editor.showGutter")?"on":"off",links:!0,matchBrackets:"always",minimap:{enabled:!1},model:o.model,parameterHints:{enabled:!0},renderIndentGuides:!0,rulers:[80],scrollBeyondLastLine:!1,theme:r.get("editor.theme"),wordWrap:r.get("editor.wordWrap")?"bounded":"off",wrappingIndent:"indent"},{codeEditorService:o.ideCtl.codeEditorService});o.pane.entry.strategy.viewState&&(t.restoreViewState(o.pane.entry.strategy.viewState),o.pane.entry.strategy.viewState=null);o.editor=t,t.layout(),setTimeout((function(){i.push(n.attachMonacoEditor(t))})),o.pane.entry.on("move",(function(){var e=t.saveViewState();o.model=o.pane.entry.strategy.model,t.setModel(o.model),t.restoreViewState(e)})),t.onDidBlurEditorWidget(p(o.paneCtl.onBlur)),t.onDidFocusEditorWidget(p(o.paneCtl.onFocus)),a.push(r.watch("editor.fontSize",d)),a.push(r.watch("editor.showGutter",f)),a.push(r.watch("editor.theme",m)),a.push(r.watch("editor.wordWrap",h)),o.element.addEventListener("dragleave",k),o.element.addEventListener("dragover",b),o.element.addEventListener("drop",j,!0),i.push({dispose:function(){o.element.addEventListener("dragleave",k),o.element.addEventListener("dragover",b),o.element.addEventListener("drop",j)}}),o.ro=new y.a(o.onResize),o.ro.observe(o.element),i.push({dispose:function(){o.ro&&o.ro.disconnect()}})},o.editor=null,o.focus=function(){o.editor&&o.editor.focus()},o.getTitle=function(){return o.pane.entry.pathname},o.model=null,o.onDrop=j,o.onResize=c.a.debounce((function(){o.editor&&o.editor.layout()}),1e3/30),o.select=function(e){var t=o.editor;if(e)if("number"==typeof e.endLineNumber&&"number"==typeof e.endColumn)t.setSelection(e),t.revealRangeInCenter(e,1);else{var n={lineNumber:e.startLineNumber,column:e.startColumn};t.setPosition(n),t.revealPositionInCenter(n,1)}},o.supportsFormatting=!0,o.resizeObserverPromise=null,o.ro=null;var p=function(e,n){return function(){if(t.$root.$$phase)return e.call(n);t.$apply(e.bind(n))}};function d(e){o.editor&&o.editor.updateOptions({fontSize:e})}function f(e){o.editor&&o.editor.updateOptions({lineNumbers:e?"on":"off"})}function m(e){v.editor.setTheme(e)}function h(e){o.editor&&o.editor.updateOptions({wordWrap:e?"bounded":"off"})}function g(){s&&o.editor&&(o.editor.removeContentWidget(s),s=null),l&&(l.remove(),l=null),u=null}function k(){g()}function b(e){var t=w(e.dataTransfer.types);(t.includes("text/plain")||t.includes("text"))&&(e.preventDefault(),u=o.editor.getTargetAtClientPoint(e.clientX,e.clientY),s||(s=function(){l||((l=document.createElement("div")).className="mousedropwidget",l.style.pointerEvents="none",l.style.borderLeft="2px solid red",l.innerHTML="&nbsp;");return{getId:function(){return"drop"},getDomNode:function(){return l},getPosition:function(){return{position:u.position,preference:[v.editor.ContentWidgetPositionPreference.EXACT,v.editor.ContentWidgetPositionPreference.EXACT]}}}}(),o.editor.addContentWidget(s)),o.editor.layoutContentWidget(s))}function j(e){if(u){var t=e.dataTransfer.getData("text/plain")||e.dataTransfer.getData("text");if(t){var n=new v.Range(u.position.lineNumber,u.position.column,u.position.lineNumber,u.position.column);o.editor.executeEdits("insert",[{range:n,text:t,forceMoveMarkers:!0}])}g()}}}]).name,$=n(1052),M=n.n($),x=o.a.module("plunker.component.pane.image",[]).directive("plunkerPaneImage",(function(){return{restrict:"E",replace:!0,require:{paneCtl:"^^plunkerPane"},template:M.a,controller:["$element",function(e){var t=this,n=[];t.$onDestroy=function(){Object(s.forEach)(n,(function(e){e()}))},t.$onInit=function(){t.paneCtl.setStrategy(t)},t.$postLink=function(){var n=t.pane.entry.toFile(),r=window.URL.createObjectURL(n);t.img=document.createElement("img"),t.img.src=r,t.img.className="plunker-pane-image",e.attr("tabIndex",-1),e.append(t.img)},t.focus=function(){t.img&&t.img.focus()},t.getTitle=function(){return t.pane.entry.pathname}}],controllerAs:"$ctrl",scope:{},bindToController:{pane:"<"}}})).name,D=(n(85),n(24),n(31),n(71),n(132),n(28),n(872)),E=n.n(D),T=n(1053),I=n.n(T),S=n(53),L=o.a.module("plunker.directive.copyToClipboard",[S.a]).directive("plunkerCopyToClipboard",["toast",function(e){return{restrict:"A",scope:{text:"@plunkerCopyToClipboard"},link:function(t,n){var r=new I.a(n[0],{text:function(){return t.text}});r.on("success",(function(){e.success("Copied to clipboard")})),r.on("error",(function(){e.success("Copy to clipboard failed")})),t.$on("$destroy",(function(){r.destroy()}))}}}]).name,A=n(889),O=n(786),N=n(1061),P=n.n(N);function R(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function F(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Y(a,r,o,i,s,"next",e)}function s(e){Y(a,r,o,i,s,"throw",e)}i(void 0)}))}}var W="https://run.plnkr.co".replace(/^https?:\/\//,window.location.protocol+"//"),B=o.a.module("plunker.component.pane.preview",[L,m.a,g.a]).directive("plunkerPanePreview",["preferences",function(e){return e.define("preview.autoRefresh",!0),e.define("preview.refreshInterval",500),{restrict:"E",replace:!0,require:{ideCtl:"^^plunkerIde",paneCtl:"^^plunkerPane"},template:P.a,controller:"PlunkerPreviewPaneController as $ctrl",scope:{},bindToController:{pane:"<"}}}]).controller("PlunkerPreviewPaneController",["$element","$scope","$timeout","commander","preferences",function(e,t,n,r,a){var i=this,c=[],l=Object(s.throttle)(y,1e3/120);i.changedPaths=new Set,i.consoleHeight=-1,i.consoleOpen=!1,i.consoleStats={},i.currentUrl="",i.defaultExtensions=[".js",".jsx",".ts",".tsx",".json",".vue"],i.hmrReady=!1,i.id=E()(),i.ideCtl=null,i.name="iframe-preview-"+i.id,i.logEntries=[],i.loading=!0,i.proxyReady=!1,i.proxyReadyDfd=new A.a,i.runtimeApi={getCompiledEntry:function(e){return F(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.ideCtl.getCompiledEntries();case 2:if(n=t.sent,r=n[e]||n["".concat(e,".js")]){t.next=6;break}throw new Error("File not found ".concat(e));case 6:return t.abrupt("return",r.content);case 7:case"end":return t.stop()}}),t)})))()},getCanonicalPath:function(e){if(i.ideCtl.tree.get(e))return e;var t,n=e.replace(/\.[^.]+$/,""),r=R(i.defaultExtensions.reduce((function(t,r){return t.push("".concat(e).concat(r)),t.push("".concat(n).concat(r)),t}),[]));try{for(r.s();!(t=r.n()).done;){var o=t.value;if(e!==o&&i.ideCtl.tree.get(o))return o}}catch(e){r.e(e)}finally{r.f()}throw new Error("No such file '".concat(e,"'"))},getFileContents:function(e){var t=i.ideCtl.tree.get(e);if(!t)return null;if(e.match(/\.(js|jsx|ts|tsx)$/)){var n=v.Uri.file("".concat(t.root.id,"/").concat(t.pathname));return Promise.resolve(v.languages.typescript.getTypeScriptWorker().then((function(e){return e(n)})).then((function(e){var r=n.toString();return e.getEmitOutput(r).then((function(e){return e.outputFiles&&1===e.outputFiles.length?e.outputFiles[0].text:t.toJSON().content}))}))).catch((function(e){return console.warn("Failed to obtain emit output from typescript worker: %s",e.message),t.toJSON().content}))}return t.toJSON().content},hasFile:function(e){return!!i.ideCtl.tree.get(e)},log:function(e){t.$apply((function(){return i.logEntries.push(e)}))},startHmr:function(){i.hmrReady=!0}},i.runtimeApiDfd=new A.a,i.started=!1,i.$onDestroy=function(){Object(s.forEach)(c,(function(e){e()})),clearInterval(i.interval),window.removeEventListener("blur",i.onChangeFocus),window.removeEventListener("focus",i.onChangeFocus),window.removeEventListener("message",m),window.removeEventListener("mousemove",g,!0),window.removeEventListener("mouseup",k,!0)},i.$onInit=function(){i.paneCtl.setStrategy(i),i.paneCtl.addOp({type:"callback",handler:M(-.25),className:"plunker-ops-shrink",tooltip:"Shrink the preview by 25% of its original size"}),i.paneCtl.addOp({type:"callback",handler:M(.25),className:"plunker-ops-grow",tooltip:"Zoom the preview by 25% of its original size"})},i.$postLink=function(){i.lastRefreshAt=0,i.lastChangeAt=Date.now(),i.proxyReady=!1,i.interval=setInterval(b,62.5),i.scale=1,i.consoleHeight=e[0].offsetHeight/2,n((function(){var e=r.getKeybinding("ide.preview.refresh");i.refreshHotkey=e?e.getLabel():null}),1e3),i.pane.options.deferRun||f().then((function(){return C()}));var o=!1;i.onChangeFocus=(a=function(t){var n=e[0],r=document.activeElement,a=!1;do{if(r===n){a=!0;break}}while(r=r.parentElement);a!==o&&(o?i.paneCtl.onBlur(t):i.paneCtl.onFocus(t),o=a)},s=i,function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(t.$root.$$phase)return a.apply(s,n);t.$apply((function(){a.apply(s,n)}))}),window.addEventListener("mousemove",g,!0),window.addEventListener("mouseup",k,!0);var a,s},i.focus=function(){i.iframe&&i.iframe.focus()},i.focusError=function(e){r.execute("project.focus",{pathname:e.pathname,selection:{start:{row:e.row,column:e.column}}})},i.getSetUrl=p,i.getTitle=function(){return"Preview"+(i.pane.entry.parent?" ("+i.pane.entry.pathname+")":"")},i.navigate=function(e){i.rpc.getRemoteApi().then((function(t){return t.navigate(e)}))},i.onClickBack=function(){r.execute("ide.preview.back",{pane:i.pane})},i.onClickForward=function(){r.execute("ide.preview.forward",{pane:i.pane})},i.onClickPopout=function(){r.execute("ide.preview.popout",{url:i.currentUrl})},i.onClickRefresh=function(){r.execute("ide.preview.refresh",{pane:i.pane,path:p()})},i.onResizeStart=function(e){e.preventDefault(),e.stopPropagation();var t=i.consoleHeight;i.dragData={height:t,start:{screenX:e.screenX,screenY:e.screenY,height:t},last:{screenX:e.screenX,screenY:e.screenY}}},i.onToggleConsole=function(e){e.preventDefault(),e.stopPropagation(),i.consoleOpen=!i.consoleOpen},i.refresh=C,i.refreshHotkey=null,i.start=f;function u(){if(i.pane.options.search)return i.pane.options.search.replace(/^\/+/,"");var e=Object(s.reduce)([[/\.(md|markdown|jade)$/,".html"]],(function(e,t){return e.replace.apply(e,t)}),i.pane.entry.pathname);return i.pane.options.fragment&&(e+=i.pane.options.fragment),e}function p(e){void 0!==e&&(i.currentUrl=d()+e.replace(/^\/+/,""),i.lastChangeAt=Date.now());var t=d();return 0===i.currentUrl.indexOf(t)?i.currentUrl.slice(t.length-1):i.currentUrl}function d(){return"".concat(W,"/preview/").concat(i.id,"/")}function f(){return i.iframe=document.createElement("iframe"),i.iframe.className="plunker-space-iframe",i.iframe.src=(W+"/render.html#"+i.id).replace(/^https?:\/\//,"//"),i.iframe.id=i.id,i.iframe.name=i.name,i.iframe.sandbox="allow-forms allow-modals allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-downloads",i.iframe.tabIndex=-1,i.iframe.setAttribute("frameborder","0"),i.iframe.setAttribute("width","100%"),i.iframe.setAttribute("height","100%"),e.children().eq(1).append(i.iframe),i.started=!0,window.addEventListener("message",m),i.rpc=new O.a({onLocationChange:function(e){var n=e.history,r=e.href;t.$apply((function(){i.currentUrl=r,i.history=n}))},onLogEntry:function(e){t.$apply((function(){return i.logEntries.push(e)}))}},{isChild:!1,registerMessageListener:function(e){return window.addEventListener("message",(function(t){t.source===i.iframe.contentWindow&&e(t.data)})),function(){}},sendMessage:function(e){return i.iframe.contentWindow.postMessage(e,W)}}),i.rpc.getRemoteApi().then((function(e){i.previewRpc=e,i.proxyReady=!0,i.pane.entry.onAny(w),i.lastChangeAt=Date.now()}))}function m(e){return h.apply(this,arguments)}function h(){return(h=F(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.data){e.next=2;break}return e.abrupt("return");case 2:if("runtimeInit"!==t.data.type){e.next=11;break}return t.data.runtimeInit&&t.data.runtimeInit.port||console.warn("Unexpected runtimeInit payload",t.data),n=t.data.runtimeInit.port,r=new O.a(i.runtimeApi,{isChild:!0,registerMessageListener:function(e){return n.onmessage=function(t){return e(t.data)},function(){}},sendMessage:function(e){return n.postMessage(e)}}),e.next=8,r.getRemoteApi();case 8:o=e.sent,i.runtimeApiDfd.settled&&(i.runtimeApiDfd=new A.a),i.runtimeApiDfd.resolve(o);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){if(i.dragData){var t=i.dragData.height,n=e.screenY-i.dragData.start.screenY;t-n<33&&(n-=Math.abs(t-n-33)),i.consoleHeight=i.dragData.height-n,i.dragData.last.screenX=e.screenX,i.dragData.last.screenY=e.screenY}}function g(e){i.dragData&&(e.preventDefault(),t.$apply(Object(s.partial)(l,e)))}function k(e){i.dragData&&(e.preventDefault(),t.$apply((function(){y(e),i.dragData=null})))}function b(){var e=Date.now(),t=a.get("preview.autoRefresh",!0),n=a.get("preview.refreshInterval",500);t&&i.proxyReady&&i.lastChangeAt>i.lastRefreshAt&&i.lastChangeAt+n<e&&C()}function w(e,t){return j.apply(this,arguments)}function j(){return(j=F(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"change"===t?i.changedPaths.add(n.entry.pathname):"move"===t&&(i.changedPaths.add(n.entry.pathname),i.changedPaths.add(n.previousPathname)),"removeListener"!==t&&(i.lastChangeAt=Date.now());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return $.apply(this,arguments)}function $(){return($=F(regeneratorRuntime.mark((function e(n){var r,o,a,s,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.iframe){e.next=3;break}return e.next=3,f();case 3:if(r=Array.from(i.changedPaths),i.changedPaths.clear(),i.logEntries.length=0,i.lastRefreshAt=Date.now(),o=d()+(n?n.replace(/^\/+/,""):u()),a={url:o,entries:{}},s=i.hmrReady&&r.length&&r.every((function(e){return e.match(/\.(js|jsx|ts|tsx|css|less|sass|scss|vue)$/)})),i.consoleStats={},i.logs&&i.logs.resetLogs(),!s){e.next=27;break}return e.next=15,i.runtimeApiDfd.promise;case 15:return c=e.sent,e.prev=16,e.next=19,c.hotReload(r);case 19:e.next=23;break;case 21:e.prev=21,e.t0=e.catch(16);case 23:return e.prev=23,t.$apply((function(){i.loading=!1})),e.finish(23);case 26:return e.abrupt("return");case 27:return i.ideCtl.tree.traverse((function(e){if("file"===e.type){var t=e.toJSON();a.entries[e.pathname]={content:t.content,encoding:t.encoding}}})),e.next=30,i.rpc.getRemoteApi();case 30:return l=e.sent,e.prev=31,e.next=34,l.refresh(a);case 34:return e.prev=34,t.$apply((function(){i.currentUrl=o,i.loading=!1})),e.finish(34);case 37:case"end":return e.stop()}}),e,null,[[16,21,23,26],[31,,34,37]])})))).apply(this,arguments)}function M(e){return function(){var t=o.a.element(document.getElementById(i.id));i.scale+=e,t.css({transform:"scale("+i.scale+")","transform-origin":"0 0"}),t.attr("width",100/i.scale+"%"),t.attr("height",100/i.scale+"%")}}}]).name,U=(n(80),n(57),n(1062)),Q=n.n(U);function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function J(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){H(a,r,o,i,s,"next",e)}function s(e){H(a,r,o,i,s,"throw",e)}i(void 0)}))}}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=o.a.module("plunker.component.pane.webtask",[L,m.a,S.a]).directive("plunkerPaneWebtask",(function(){return{restrict:"E",replace:!0,require:{paneCtl:"^^plunkerPane"},template:Q.a,controller:function(){function e(t,n,r,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$element=t,this.$q=n,this.$scope=r,this.commander=o,this.iframe=null,this.logs=null,this.refreshing=null,this.terminal=null,this.toast=a}var t,r,o,a,i,s;return e.$inject=["$element","$q","$scope","commander","toast"],t=e,(r=[{key:"$onDestroy",value:function(){this.terminal&&(this.terminal.destroy(),this.terminal=null),this.logs&&this.logs.destroy()}},{key:"$onInit",value:function(){var e=this;this.paneCtl.setStrategy(this),this.pane.entry.onAny((function(t){return e.onTreeEvent(t)}))}},{key:"$postLink",value:function(){this.startLogs()}},{key:"clearLogs",value:function(){this.terminal&&this.terminal.clear()}},{key:"focus",value:function(){if(this.iframe)this.iframe.focus();else{var e=this.$element.find("input")[0];e&&(e.focus(),e.select())}}},{key:"getTitle",value:function(){return"Webtask preview"}},{key:"isDirty",value:function(){return!!this.pane.entry.projectMetadata.webtask.$dirty}},{key:"onClickRefresh",value:function(e){e.preventDefault(),e.stopPropagation(),this.refresh()}},{key:"onTreeEvent",value:function(){this.pane.entry.projectMetadata.webtask.$dirty=!0}},{key:"refresh",value:function(){var e=this;this.refreshing=this.$q.resolve(this._refresh()).catch((function(t){e.toast.error("Error refreshing webtask: ".concat(t.message))})).finally((function(){return e.refreshing=null}))}},{key:"_refresh",value:(s=J(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.start();case 2:if(e.t0=this.isDirty(),!e.t0){e.next=7;break}return e.next=6,this.toast.confirm({body:"You have unsaved changes that are not yet synced with webtask. Would you like to update your webtask?",resolveOnNo:!0});case 6:e.t0=e.sent;case 7:if(!e.t0){e.next=10;break}return e.next=10,this.commander.execute("editor.save.webtask",{tree:this.pane.entry,webtask:this.pane.entry.projectMetadata.webtask});case 10:this.iframe.src=this.pane.entry.projectMetadata.webtask.url;case 11:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"start",value:(i=J(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.iframe||(this.iframe=document.createElement("iframe"),this.iframe.className="plunker-space-iframe plunker-webtask-preview",this.iframe.id=this.id,this.iframe.name=this.name,this.iframe.sandbox="allow-forms allow-modals allow-pointer-lock allow-popups allow-same-origin allow-scripts",this.iframe.tabIndex=-1,this.iframe.setAttribute("frameborder","0"),this.iframe.setAttribute("width","100%"),this.iframe.setAttribute("height","100%"),this.$element.children().eq(1).append(this.iframe)),this.terminal){e.next=4;break}return e.next=4,this.startLogs();case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"startLogs",value:(a=J(regeneratorRuntime.mark((function e(){var t,r,o,a,i,s,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(10).then(n.t.bind(null,1331,7)),n.e(90).then(n.t.bind(null,1332,7))]);case 2:return t=e.sent,r=G(t,2),o=r[0].Terminal,a=r[1],o.applyAddon(a),this.terminal=new o,this.terminal.open(this.$element.children().eq(2)[0]),this.terminal.fit(),this.logs&&this.logs.destroy(),i={},s=setTimeout((function(){var e=new Error("Timeout connecting to real-time logs");c.terminal.writeln(e.message),i.reject(e)}),5e3),i.promise=new Promise((function(e,t){i.resolve=e,i.reject=t})),this.logs=this.pane.entry.projectMetadata.webtask.sandbox.createLogStream(),this.logs.on("data",(function(e){c.terminal.writeln(e.msg)})),this.logs.on("open",(function(){c.terminal.writeln("Connected to streaming logs..."),clearTimeout(s),i.resolve()})),e.next=19,i.promise;case 19:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})}])&&K(t.prototype,r),o&&K(t,o),e}(),controllerAs:"$ctrl",scope:{},bindToController:{pane:"<"}}})).name,V=n(1063),Z=n.n(V),X=(n(1064),o.a.module("plunker.component.pane",[u.a,p.a,d.a,m.a,h.a,C,x,B,_]).directive("plunkerPane",[function(){return{restrict:"E",replace:!0,template:Z.a,controller:"PlunkerPaneComponentController as $ctrl",scope:{},bindToController:{isFirst:"<",isLast:"<",isLoading:"<loading",pane:"<",onClose:"&",onMove:"&",onSwap:"&"}}}]).controller("PlunkerPaneComponentController",["$element","$injector","$scope","$timeout","commander","panes",function(e,t,n,r,a,i){var c=this,l=function(e,t){return function(){var r=Array.prototype.slice.call(arguments);if(n.$root.$$phase)return e.apply(t,r);n.$apply((function(){e.apply(t,r)}))}};function u(t){var n=e[0],r=document.activeElement instanceof window.HTMLIFrameElement?document.activeElement:t.target,o=c.hasFocus;c.hasFocus=!1;do{if(n===r){c.hasFocus=!0;break}}while(r=r.parentNode);o!==c.hasFocus&&(c.hasFocus?c.onFocus:c.onBlur)(c.pane)}function p(e){return c.onClose({$event:e,pane:c.pane})}function d(e){c.ops.push(Object(s.defaults)(e,{isHidden:Object(s.constant)(!1),order:0,handler:"command"===e.type?function(t){a.execute(e.command,Object(s.defaults)({$event:t},e.locals))}:o.a.noop}))}c.hasFocus=!1,c.ops=[],c.$onDestroy=function(){r((function(){c.pane.setController(),c.pane.setStrategy(),c.pane.emit("unmount",c.pane)}))},c.$postLink=function(){r((function(){c.pane.setController(c),c.pane.setStrategy(c.strategy),c.pane.emit("mount",c.pane)}))},c.acceptsDrop=function(e,t){if(t instanceof i.Pane)return t!==c.pane;if(t instanceof f.a){return i.getByEntry(t)!==c.pane}},c.onDrop=function(e,t,n){var r={center:{replace:c.pane},left:{before:c.pane},right:{after:c.pane}}[n],o=t instanceof i.Pane?t:t instanceof f.a?i.getByEntry(t):null;if(o instanceof i.Pane)return r.pane=o,r.focus=!0,a.execute("workspace.move",r);if(t instanceof f.a)return r.entry=t,r.focus=!0,a.execute("workspace.open",r);console.error("Dropped an unsupported object",t)},c.onClickClose=p,c.onClickHeader=function(e){if(e.preventDefault(),e.stopPropagation(),"function"==typeof c.strategy.focus)return c.strategy.focus()},c.onClickOp=function(e,t){return e.preventDefault(),e.stopPropagation(),t.handler(e)},c.onBlur=function(){c.pane.emit("blur",c.pane)},c.onFocus=function(){c.pane.emit("focus",c.pane)},window.addEventListener("blur",l(u),!0),window.addEventListener("focus",l(u),!0),c.addOp=d,c.setStrategy=function(e){c.strategy=e},d({type:"callback",handler:p,className:"plunker-ops-close",tooltip:"Close this pane",order:Number.POSITIVE_INFINITY})}]).name),ee=n(1065),te=n.n(ee);n(1066),t.a=o.a.module("plunker.component.panes",[i.a,X]).directive("plunkerPanes",[function(){return{restrict:"E",replace:!0,template:te.a,controller:"PlunkerPanesComponentController as $ctrl",scope:{},bindToController:{isLoading:"<loading",panes:"<",tree:"<",onClosePane:"&"}}}]).controller("PlunkerPanesComponentController",["$element","$scope","$window",function(e,t,n){var r=this;r.dragData=null,r.getBasis=function(e){var t=r.panes.reduce((function(e,t){return e+r.widths.get(t)}),0),n=r.panes[e];return 100*r.widths.get(n)/t+"%"},r.onMouseDown=function(t,n){var o=e[0].offsetWidth,a=r.panes[n],i=r.panes[n+1],s=r.widths.get(a)*o,c=r.widths.get(i)*o;r.dragData={index:n,start:{screenX:t.screenX,screenY:t.screenY,widthLeft:s,widthRight:c},last:{screenX:t.screenX,screenY:t.screenY}}},r.widths=new WeakMap,n.addEventListener("mousemove",i,!0),n.addEventListener("mouseup",s,!0),r.$onDestroy=function(){n.removeEventListener("mousemove",i,!0),n.removeEventListener("mouseup",s,!0)},t.$watchCollection("$ctrl.panes",(function(e,t){var n=0;o.a.forEach(e,(function(o){var a=r.widths.get(o);void 0!==a&&t?e&&e.length&&(!t||e.length>t.length)&&r.widths.set(o,a*t.length/e.length):r.widths.set(o,1/e.length),n+=r.widths.get(o)})),o.a.forEach(e,(function(e){r.widths.set(e,r.widths.get(e)/n)}))}));var a=c.a.throttle(l,1e3/120);function i(e){r.dragData&&(e.preventDefault(),t.$apply(c.a.partial(a,e)))}function s(e){r.dragData&&t.$apply((function(){l(e),r.dragData=null}))}function l(t){if(r.dragData){var n=e[0].offsetWidth,o=t.screenX-r.dragData.start.screenX,a=r.panes[r.dragData.index],i=r.panes[r.dragData.index+1],s=r.dragData.start.widthLeft,c=r.dragData.start.widthRight,l=Math.max(n/10,100);s+o<l&&(o+=Math.abs(s+o-l)),c-o<l&&(o-=Math.abs(c-o-l));var u=s+o,p=c-o;r.widths.set(a,u/n),r.widths.set(i,p/n),r.dragData.last.screenX=t.screenX,r.dragData.last.screenY=t.screenY}}}]).name},1258:function(e,t,n){"use strict";n(11),n(24),n(7),n(80),n(28),n(85),n(8);var r=n(6),o=n.n(r),a=n(34),i=n.n(a),s=n(51),c=n.n(s),l=n(129),u=n(1072),p=n.n(u),d=n(1125),f=n.n(d),m=n(1126),h=n.n(m),y=n(1128),v=n.n(y),g=n(1129),k=n.n(g),b=o.a.module("plunker.directive.markdown",[]).directive("plunkerMarkdown",[function(){return{restrict:"A",link:function(e,t,n){var r={html:!!n.html,replaceLink:function(e){return h()(e)?k()(n.markdownRelativeTo,e):e}},o=n.markdownPreset?new p.a(n.markdownPreset,r):new p.a(r);n.markdownRelativeTo&&(o=o.use(f.a));var a=e.$eval(n.plunkerMarkdown),i=o.render(a);n.markdownTruncate&&(i=v()(i,+n.markdownTruncate)),t.html(i)}}}]).name,w=n(53),j=n(1136),C=n.n(j),$=n(1137),M=n.n($);n(1138),t.a=o.a.module("plunker.component.npmSearch",[i.a,l.a,b,w.a]).factory("npm",["$uibModal",function(e){var t={showSearch:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.open({animation:!1,bindToController:!0,controller:"PlunkerNpmSearchModalController",controllerAs:"$ctrl",resolve:{searchOptions:function(){return t}},showFilePicker:!1,size:"lg",template:M.a});return n.result}};return t}]).controller("PlunkerNpmSearchModalController",["$http","$uibModal","$uibModalInstance","toast","searchOptions",function(e,t,n,r,o){var a=this;function i(e){return(n=e.name,t.open({animation:!1,bindToController:!0,controller:"PlunkerResourcePickerModalController",controllerAs:"$ctrl",resolve:{packageFiles:c.a.partial(l,n),packageJson:c.a.partial(u,n)},size:"lg",template:C.a}).result).then(a.resolve);var n}function s(t,n){var o=e.get("https://api.npms.io/v2/search",{params:{q:t.replace(/#([^\s]+)/g,"keywords:$1"),from:n,size:a.itemsPerPage}});return a.activeResult=null,o.then((function(e){if(a.input!==t)return;a.results=e.data.results.map((function(e){return e.package})),a.activeResult=a.results[0],a.offset=parseInt(e.data.from,10)||0,a.totalItems=parseInt(e.data.total,10)}),(function(e){if(a.input!==t)return;r.error("Error completing search: "+e.message),a.results=null,a.error=e,a.offset=0})).finally((function(){if(a.input!==t)return;a.request=null}))}function l(t,n){return e.get("https://unpkg.com/".concat(encodeURIComponent(t),"@").concat(encodeURIComponent(n||"latest"),"/?meta")).then(c.a.property("data"))}function u(t,n){return e.get("https://cdn.jsdelivr.net/npm/".concat(encodeURIComponent(t),"@").concat(encodeURIComponent(n||"latest"),"/package.json")).then(c.a.property("data"))}a.activeResult=null,a.error=null,a.input="",a.offset=0,a.results=null,a.request=null,a.currentPage=1,a.itemsPerPage=5,a.totalItems=0,a.reject=function(e){var t=e instanceof Error?e:new Error(e.toString());return n.dismiss(t)},a.resolve=n.close.bind(n),a.onChangeInput=function(e){a.request&&a.request.abort&&a.request.abort();if(!e)return a.request=null,a.results=null,void(a.offset=0);a.request=s(e)},a.onClickPackage=function(e){if(o.showFilePicker)return i(e);return a.resolve(e)},a.onClickTag=function(e){a.input=a.input?a.input+" #"+e:"#"+e,a.request=s(a.input)},a.onFocus=function(e,t){a.activeResult=t},a.onKeyDown=function(e){if(!a.results||!a.results.length)return;var t=a.results.indexOf(a.activeResult),n={38:-1,40:1}[e.keyCode];if(!n)return;var r=(a.results.length+t+n)%a.results.length;a.activeResult=a.results[r]},a.onSubmit=function(e){if(o.showFilePicker)return i(e);return a.resolve(e)},a.search=s}]).controller("PlunkerResourcePickerModalController",["$uibModalInstance","packageFiles","packageJson",function(e,t,n){var r,o,a,i=this;i.onDoubleClickFile=function(){i.resolve(i.formData)},i.packageFiles=t,i.packageJson=n,i.assets=(r=[],o=["application/javascript","text/javascript"],a=["text/css","text/less","text/sass","text/scss","text/x-sass","text/x-scss"],function e(t){if("directory"===t.type)return c.a.forEach(t.files,e);if("file"===t.type){var i="node_modules/"+n.name+t.path,s="/"===t.path[0]?t.path.slice(1):t.path;t.contentType&&-1!==o.indexOf(t.contentType)?r.push({type:"script",url:i,pathname:s,tag:'<script type="text/javascript" src="'.concat(i,'"><\/script>'),allow:["cursor","head","body"]}):t.contentType&&-1!==a.indexOf(t.contentType)&&r.push({type:"stylesheet",url:i,pathname:s,tag:'<link rel="stylesheet" href="'.concat(i,'">'),allow:["cursor","head","body"]})}}(t),r),i.reject=function(t){var n=t instanceof Error?t:new Error(t.toString());return e.dismiss(n)},i.resolve=e.close.bind(e),i.formData={assets:[],name:n.name,target:"head",version:n.version}}]).name},1265:function(e,t,n){"use strict";n.r(t),n.d(t,"EditorFooterComponent",(function(){return a}));var r=n(171),o=n(1147);var a={template:n.n(o).a,bindings:{project:"<"},controller:["$injector",function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.injector=t,this.referrer=window._ssr&&window._ssr.referrer||"blank"}],dependencies:[r.a]}},1266:function(e,t,n){"use strict";n.r(t),n.d(t,"EditorProjectComponent",(function(){return a}));n(57);var r=n(52);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a={bindings:{project:"<"},controller:function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.injector=t,this.scope=n,this._onTreeEvent=this.onTreeEvent.bind(this)}var t,n,r;return e.$inject=["$injector","$scope"],t=e,(n=[{key:"$onDestroy",value:function(){this.editor.setProject(null),this.project.tree.offAny(this._onTreeEvent)}},{key:"$onInit",value:function(){this.editor.setProject(this.project),this.project.tree.onAny(this._onTreeEvent)}},{key:"$postLink",value:function(){var e=this.injector.get("commander"),t=this.project.tree.find(["index.html","readme.md","demo.html",".html",""]);t&&e.execute("workspace.open",{entry:t,focus:!0})}},{key:"onTreeEvent",value:function(e){"removeListener"!==e&&(this.project.setDirty(!0),this.scope.$root.$$phase||this.scope.$digest())}}])&&o(t.prototype,n),r&&o(t,r),e}(),dependencies:[r.a],name:"plunkerEditorBasic",require:{editor:"^^plunkerEditor"}}},1267:function(e,t,n){"use strict";n.r(t),n.d(t,"EditorToolbarrightComponent",(function(){return s}));var r=n(52),o=n(664),a=n(1186);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s={template:n.n(a).a,bindings:{project:"<"},controller:function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.injector=t}var t,n,r;return e.$inject=["$injector"],t=e,(n=[{key:"$onInit",value:function(){this.previewPaneType="webtask"===this.project.type?"webtask":"preview"}},{key:"isPreviewActive",value:function(){return!!this.injector.get("panes").getByEntry(this.project.tree,{type:this.previewPaneType})}},{key:"onClickTogglePreview",value:function(e){var t=this.injector.get("commander");e.preventDefault(),e.stopPropagation(),t.execute("ide.preview.toggle")}}])&&i(t.prototype,n),r&&i(t,r),e}(),dependencies:[r.a,o.a]}},1333:function(e,t,n){"use strict";n.r(t),n.d(t,"EditorToolbarleftComponent",(function(){return le}));var r=n(244),o=n(52),a=n(664),i=n(40),s=(n(11),n(7),n(27),n(42),n(12),n(17),n(14),n(8),n(6)),c=n.n(s),l=(n(24),n(71),n(44),n(710)),u=n(205),p=n(796),d=n(1176),f=n.n(d);n(1177);function m(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){m(a,r,o,i,s,"next",e)}function s(e){m(a,r,o,i,s,"throw",e)}i(void 0)}))}}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v={template:f.a,bindings:{close:"&",dismiss:"&",resolve:"<"},controller:function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$scope=n,this.injector=t,this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.showHidden=!1}var t,n,r,o,a;return e.$inject=["$injector","$scope"],t=e,(n=[{key:"$onDestroy",value:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}},{key:"$onInit",value:function(){}},{key:"$postLink",value:function(){var e=this;window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),this.templateList=Array.isArray(this.resolve.templates.templates)?this.resolve.templates.templates.map((function(t){return function(e,t){return Object.assign({spec:{type:"github",params:{user:"plnkr",repo:"starters",hashish:t||"master",path:Object(l.resolve)("/",e.path)},options:Object.assign({deferRun:!0,preview:!0},e.options)}},e)}(t,e.resolve.hashish)})):[],this.templateList.unshift({name:"Default",description:"An empty html, css and javascript template",logoUrl:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2MzAgNjMwIj48cGF0aCBmaWxsPSIjZjdkZjFlIiBkPSJNMCAwaDYzMHY2MzBIMHoiLz48cGF0aCBkPSJNNDIzLjIgNDkyLjE5YzEyLjY5IDIwLjcyIDI5LjIgMzUuOTUgNTguNCAzNS45NSAyNC41MyAwIDQwLjItMTIuMjYgNDAuMi0yOS4yIDAtMjAuMy0xNi4xLTI3LjQ5LTQzLjEtMzkuM2wtMTQuOC02LjM1Yy00Mi43Mi0xOC4yLTcxLjEtNDEtNzEuMS04OS4yIDAtNDQuNCAzMy44My03OC4yIDg2LjctNzguMiAzNy42NCAwIDY0LjcgMTMuMSA4NC4yIDQ3LjRsLTQ2LjEgMjkuNmMtMTAuMTUtMTguMi0yMS4xLTI1LjM3LTM4LjEtMjUuMzctMTcuMzQgMC0yOC4zMyAxMS0yOC4zMyAyNS4zNyAwIDE3Ljc2IDExIDI0Ljk1IDM2LjQgMzUuOTVsMTQuOCA2LjM0YzUwLjMgMjEuNTcgNzguNyA0My41NiA3OC43IDkzIDAgNTMuMy00MS44NyA4Mi41LTk4LjEgODIuNS01NC45OCAwLTkwLjUtMjYuMi0xMDcuODgtNjAuNTR6bS0yMDkuMTMgNS4xM2M5LjMgMTYuNSAxNy43NiAzMC40NSAzOC4xIDMwLjQ1IDE5LjQ1IDAgMzEuNzItNy42MSAzMS43Mi0zNy4ydi0yMDEuM2g1OS4ydjIwMi4xYzAgNjEuMy0zNS45NCA4OS4yLTg4LjQgODkuMi00Ny40IDAtNzQuODUtMjQuNTMtODguODEtNTQuMDc1eiIvPjwvc3ZnPg==",spec:{type:"basic",params:{},options:{open:"lib/script.js"}}}),this.templateList.push({name:"Webtask",description:"Run serverless code in Plunker",hidden:!0,logoUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhdSURBVHhe7dbfjl0FGYdhb0hFI8FAIFHvwZDOFOjgCRakLRjlCL0Dyn9D7BFelk3RdpiSFlQiTIt0ufaIJG64AL93PV/yZB/P7PV79/rO0z98ZAGYQLCAMQQLGEOwgDEECxhDsIAxBAsYQ7CAMQQLGEOwgDEECxhDsIAxBAsYQ7CAMQQLGEOwgDEECxhDsIAxBAsYQ7CAMQQLGEOwgDEECxhDsIAxBAsYQ7CAMQQLGEOwgDEECxhDsIAxBAsYQ7CAMQQLGEOwgDEECxhDsIAxBAsYQ7CAMQQLGEOwgDEECxhDsIAxBAsYQ7CAMQQLGEOwgDEECxhDsIAxBAsYQ7CAMQQLGEOwgDEECxhDsIAxBAsYQ7CAMQQLGEOwgDE2FaynfvDI8uT3Hl6e/O5q9wnDnfv+6qHt2EywdrF69kc/Xn770yeWV372xNknTPXKV59XHnt8ufzodmwmWLtfo9/85InlztXD5ZO3Dpe7bxzAXG+urh4sNy49vVx/7pnl+sVt2FSwdr9Iu1j9/Q8HyyfvwGDvrt46WG6/fLScvPDscvLiNmwuWHffWN+w1i/87vplw1hvr9Y3reOXLiy3nj9abv1qGwQLJhKsNsEiRbDaBIsUwWoTLFIEq02wSBGsNsEiRbDaBIsUwWoTLFIEq02wSBGsNsEiRbDaBIsUwWoTLFIEq02wSBGsNsEiRbDaBIsUwWoTLFIEq02wSBGsNsEiRbDaBIsUwWoTLFIEq02wSBGsNsEiRbDaBIsUwWoTLFIEq02wSBGsNsEiRbDaBIsUwWoTLFIEq02wSBGsNsEiRbDaBIsUwWoTLFIEq02wSBGsNsEiRbDaBIsUwWoTLFIEq02wSBGsNsEiRbDaBIsUwWoTLFIEq02wSBGsNsEiRbDaBIsUwWoTLFIEq02wSBGsNsEiRbDaBIsUwWoTLFIEq02wSBGsNsEiRbDaBIsUwWoTLFIEq02wSBGsNsEiRbDaBIsUwWrbZLDePLfcufrzTbn7+rmzId99PW73N74mWFmbDNY755dP3v/l8rc/Pb8N719cPr52fvn4jwerw7Zrq/cOl+NfC1bS1oK1e9vYDfjLfx4vD+5/uvpH3Po3nn643Lt5aTm9cX45/eBC219X1y8sJ68eLTef+/ZxFwlW1Fmw1reOB//6bNnOfb7cv/PScu/2+eXeR0dtd1bHR8vJ7wQrabPBWt8+NnNffrrc/+jKcu/DNVgn66DLdtG6KVhZgrWBE6w8wYoSrL2B1whWm2Bt4AQrT7CiBGtv4DWC1SZYGzjByhOsKMHaG3iNYLUJ1gZOsPIEK0qw9gZeI1htgrWBE6w8wYoSrL2B1whWm2Bt4AQrT7CiBGtv4DWC1SZYGzjByhOsKMHaG3iNYLUJ1gZOsPIEK0qw9gZeI1htgrWBE6w8wYoSrL2B1whWm2Bt4AQrT7CiBGtv4DWC1SZYGzjByhOsKMHaG3iNYLUJ1gZOsPIEK0qw9gZeI1htgrWBE6w8wYoSrL2B1whWm2Bt4AQrT7CiBGtv4DWC1SZYGzjByhOsKMHaG3iNYLUJ1gZOsPIEK0qw9gZeI1htgrWBE6w8wYoSrL2B1whWm2Bt4AQrT7CiBGtv4DWC1SZYGzjByhOsKMHaG3iNYLUJ1gZOsPIEK0qw9gZeI1htgrWBE6w8wYoSrL2B1whWm2Bt4AQrT7CiBGtv4DWC1SZYGzjByhOsKMHaG3iNYLUJ1gZOsPIEK0qw9gZeI1htgrWBE6w8wYoSrL2B1whWm2Bt4AQrT7CiBGtv4DWC1SZYGzjByhOsKMHaG3iNYLUJ1gZOsPIEK+rrYH3x2Vdr3sA9+Fyw4gQr6ixY719cHpwen715bMIXH67BuixYYYJV9frB8vG1p9aH+sXl/p0rZ28efZfWMf/im+MuEqy2TQbrjwfL6Qfr28bt1e6tI28N9MmFb467SLDathmsw+X0L+uAdw/3tz30zCVYbYJFimC1CRYpgtUmWKQIVptgkSJYbYJFimC1CRYpgtUmWKQIVptgkSJYbYJFimC1CRYpgtUmWKQIVptgkSJYbYJFimC1CRYpgtUmWKQIVptgkSJYbYJFimC1CRYpgtUmWKQIVptgkSJYbYJFimC1CRYpgtUmWKQIVptgkSJYbYJFimC1CRYpgtUmWKQIVptgkSJYbYJFimC1CRYpgtUmWKQIVptgkSJYbYJFimC1CRYpgtUmWKQIVptgkSJYbYJFimC1CRYpgtUmWKQIVptgkSJYbYJFimC1CRYpgtUmWKQIVptgkSJYbYJFimC1CRYpgtUmWKQIVptgkSJYbYJFimC1CRYpgtUmWKQIVptgkSJYbYJFimC1CRYpgtUmWKQIVtvXwXpzDda766DfjntjDda1NVg312Dd+eoBp2P3nR4LVtZ/g3Xn6hqstw7PBp322hqs9w6Xz6+vwVof7N2vMSHrd3p6Yw3Wq4KVdO6hh5crjz2+3Lj09HL75aPl+KULfS9fOHugT37/n19iQnbf6frd3rq8euF/R122qWBdfvTx5c/PPbOcvPDscuv59R9QtnuI18/dry9dW4rVzuaCdf3iGqwX12B9yz8D+P8mWMAYggWMIVjAGIIFjCFYwBiCBYwhWMAYggWMIVjAGIIFjCFYwBiCBYwhWMAYggWMIVjAGIIFjCFYwBiCBYwhWMAYggWMIVjAGIIFjCFYwBiCBYwhWMAYggWMIVjAGIIFjCFYwBiCBYwhWMAYggWMIVjAGIIFjCFYwBiCBYwhWMAYggWMIVjAGIIFjCFYwBiCBYwhWMAYggWMIVjAGIIFjCFYwBiCBYwhWMAYggWMIVjAGIIFjCFYwBiCBYwhWMAYggWMIVjAEEfLvwGpBQ4BjizgSQAAAABJRU5ErkJggg==",spec:function(){return e.showWebtaskImportModal().then((function(e){return{params:e,type:"webtask"}}))}})}},{key:"onClick",value:(a=h(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),"function"!=typeof n.spec){e.next=8;break}return e.t0=this,e.next=5,n.spec();case 5:return e.t1=e.sent,e.t2={$value:e.t1},e.abrupt("return",e.t0.close.call(e.t0,e.t2));case 8:return e.abrupt("return",this.close({$value:n.spec}));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"onKeyDown",value:function(e){var t=this;"Alt"===e.key&&this.$scope.$apply((function(){t.showHidden=!0}))}},{key:"onKeyUp",value:function(e){var t=this;"Alt"===e.key&&this.$scope.$apply((function(){t.showHidden=!1}))}},{key:"reject",value:function(e){return this.dismiss({$value:e})}},{key:"resolve",value:function(e){return this.close({$value:e})}},{key:"showWebtaskImportModal",value:(o=h(regeneratorRuntime.mark((function e(){var t,n,r,o,a,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=localStorage.getItem("wt:token");try{Object(p.validateToken)({token:t})}catch(e){t=null,localStorage.removeItem("wt:token")}if(t){e.next=9;break}return n=this.injector.get("oauth"),e.next=6,n.authenticate("webtask",{responseType:"accessToken"});case 6:r=e.sent,t=r.accessToken,localStorage.setItem("wt:token",t);case 9:return o=Object(p.createClient)({token:t}),e.prev=10,a=this.injector.get("$uibModal"),e.next=14,a.open({animation:!1,component:"plunkerImportWebtaskModal",resolve:{webtaskClient:function(){return o}}}).result;case 14:return i=e.sent,s=i.webtask,e.abrupt("return",{container:s.claims.ten,name:s.claims.jtn});case 19:if(e.prev=19,e.t0=e.catch(10),"string"!=typeof e.t0){e.next=23;break}throw new u.a(e.t0);case 23:throw e.t0;case 24:case"end":return e.stop()}}),e,this,[[10,19]])}))),function(){return o.apply(this,arguments)})}])&&y(t.prototype,n),r&&y(t,r),e}(),dependencies:[]},g=n(1178);function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b={template:n.n(g).a,bindings:{close:"&",dismiss:"&"},controller:function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.injector=t,this.model={id:""}}var t,n,r;return e.$inject=["$injector"],t=e,(n=[{key:"reject",value:function(e){return this.dismiss({$value:e})}},{key:"resolve",value:function(e){return this.close({$value:e})}}])&&k(t.prototype,n),r&&k(t,r),e}(),dependencies:[]},w=n(1179);function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C={template:n.n(w).a,bindings:{close:"&",dismiss:"&"},controller:function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.injector=t,this.model={username:"",repo:"",hashish:"master",path:""}}var t,n,r;return e.$inject=["$injector"],t=e,(n=[{key:"reject",value:function(e){return this.dismiss({$value:e})}},{key:"resolve",value:function(e){return this.close({$value:e})}}])&&j(t.prototype,n),r&&j(t,r),e}(),dependencies:[]},$=(n(85),n(80),n(54)),M=n(1180),x=n.n(M);n(1181);function D(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var I={template:x.a,bindings:{close:"&",dismiss:"&"},controller:function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.injector=t,this.activeResult=null,this.loading=null,this.model={username:"",repo:"",hashish:"master",path:""},this.templates=[],this._searchText=""}var t,n,r;return e.$inject=["$injector"],t=e,(n=[{key:"$onInit",value:function(){var e=this;this.loading=this.search().finally((function(){e.loading=null}))}},{key:"onClickTemplate",value:function(e,t){return e.stopPropagation(),e.preventDefault(),this.resolve({id:t.id})}},{key:"onKeyDown",value:function(e){if(this.templates&&this.templates.length){var t=this.templates.indexOf(this.activeResult),n={38:-1,40:1}[e.keyCode];if(n){e.preventDefault(),e.stopPropagation();var r=(this.templates.length+t+n)%this.templates.length;this.activeResult=this.templates[r]}}}},{key:"onSubmit",value:function(e,t){if(t)return e.preventDefault(),this.resolve({id:t.id})}},{key:"reject",value:function(e){return this.dismiss({$value:e})}},{key:"resolve",value:function(e){return this.close({$value:e})}},{key:"search",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.injector.get("api");t.q||(t.sort="forked:desc"),t.tags=["template"];var r=n.request({params:t,expectStatus:[200],method:"GET",path:"/users/plunker/collections/public/plunks"});return this.activeResult=null,this.error=null,this.loading=r.then((function(t){var n;(n=e.templates).splice.apply(n,[0,e.templates.length].concat(D(t.data.items)))}),(function(t){e.error=t})).finally((function(){e.loading=null})),this.loading}},{key:"searchText",value:function(e){return void 0!==e&&(this._searchText=e,this.search({q:e})),this._searchText}}])&&T(t.prototype,n),r&&T(t,r),e}(),dependencies:[$.a]},S=(n(20),n(13),n(1182)),L=n.n(S),A=n(153),O=n(53),N=n(1183),P=n.n(N);n(1184);function R(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Y(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||Y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){if(e){if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function B(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){W(a,r,o,i,s,"next",e)}function s(e){W(a,r,o,i,s,"throw",e)}i(void 0)}))}}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Q={template:P.a,bindings:{close:"&",dismiss:"&",resolve:"<"},controller:function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.injector=t,this.loading=null,this.alerts=[],this.webtaskClient=null,this.webtasks=null}var t,r,o,a,i,s;return e.$inject=["$injector"],t=e,(r=[{key:"$onInit",value:function(){var e=this;this.webtaskClient=this.resolve.webtaskClient,this.refreshWebtasks().then(function(){var t=B(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.length){t.next=5;break}return t.next=3,e.createWebtask();case 3:return r=t.sent,t.abrupt("return",e.close({$value:{webtask:r}}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){e.alerts.push({type:"danger",message:t.message}),e.loading=null,e.webtasks=null}))}},{key:"createWebtask",value:(s=B(regeneratorRuntime.mark((function e(){var t,r,o,a,i,s,c,l,u,p,d,f,m,h,y,v,g,k,b,w,j,C,$;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.injector.get("toast"),e.next=3,t.prompt({hint:"Select a description that will help you identify the nature of this Webtask",placeholder:"Webtask description",required:!0,title:"Choose a name for your webtask"});case 3:return r=e.sent,e.next=6,Promise.all([Promise.resolve().then(n.bind(null,796)),Promise.resolve().then(n.t.bind(null,1028,7))]);case 6:return o=e.sent,a=z(o,2),i=a[0].resolveNpmVersion,s=a[1].default,c=L()(8),l={name:c,version:"1.0.0",dependencies:{"@webtask/middleware-compiler":"^1.3.0","webtask-hacks":"^2.2.0"},main:"index.js"},(u=new s).file("package.json",JSON.stringify(l,null,2)),u.file("index.js","module.exports = cb => cb(null, 'Hello webtask');"),p=u.generate({type:"base64",mimeType:"application/zip",compression:"deflate"}),d={},f=l.dependencies,m=Date.now()+18e4,e.next=21,Promise.all(Object.keys(f).map(function(){var e=B(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f[t],e.next=3,i(t,n);case 3:return r=e.sent,d[t]=r,e.abrupt("return",{name:t,version:r});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 21:h=e.sent;case 22:if(!(Date.now()<m)){e.next=51;break}return e.next=25,this.webtaskClient.ensureNodeModules({modules:h});case 25:y=e.sent,v=!0,g=R(y),e.prev=28,g.s();case 30:if((k=g.n()).done){e.next=37;break}if(b=k.value,w=b.name,j=b.version,"failed"!==(C=b.state)){e.next=34;break}throw new Error("Failed to provision ".concat(w,"@").concat(j));case 34:"queued"===C&&(v=!1);case 35:e.next=30;break;case 37:e.next=42;break;case 39:e.prev=39,e.t0=e.catch(28),g.e(e.t0);case 42:return e.prev=42,g.f(),e.finish(42);case 45:if(!v){e.next=47;break}return e.abrupt("break",51);case 47:return e.next=49,new Promise((function(e){return setTimeout(e,2e3)}));case 49:e.next=22;break;case 51:return e.next=53,this.webtaskClient.createWebtask({code:p,name:c,meta:{plnkr:"webtask","plnkr-desc":r,"plnkr-created":"".concat(Date.now()),"plnkr-saved":"0","wt-compiler":"@webtask/middleware-compiler","wt-middleware":"webtask-hacks/unpack","wt-node-dependencies":JSON.stringify(d)}});case 53:return $=e.sent,e.abrupt("return",$);case 55:case"end":return e.stop()}}),e,this,[[28,39,42,45]])}))),function(){return s.apply(this,arguments)})},{key:"onClickCreate",value:(i=B(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),t.preventDefault(),e.prev=2,e.next=5,this.createWebtask();case 5:return n=e.sent,e.abrupt("return",this.close({$value:{webtask:n}}));case 9:e.prev=9,e.t0=e.catch(2),this.alerts.push({type:"danger",message:e.t0.message});case 12:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(e){return i.apply(this,arguments)})},{key:"onClickDeleteWebtask",value:(a=B(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),t.preventDefault(),e.prev=2,e.next=5,n.remove();case 5:return e.next=7,this.refreshWebtasks();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.alerts.push({type:"danger",message:e.t0.message});case 12:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(e,t){return a.apply(this,arguments)})},{key:"onClickWebtask",value:function(e,t){return e.stopPropagation(),e.preventDefault(),this.close({$value:{webtask:t}})}},{key:"refreshWebtasks",value:function(){var e=this,t=this.injector.get("$q");return this.webtasks=null,this.loading=t.resolve(this.webtaskClient.listWebtasks({meta:{plnkr:"webtask"}})).then((function(t){return e.loading=null,e.webtasks=t,t})),this.loading}}])&&U(t.prototype,r),o&&U(t,o),e}(),dependencies:[A.a,O.a]},G=(n(25),n(34)),q=n.n(G),H=n(152),J=n(197);function K(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var V=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.injector=t,this.specResolvers={basic:Z,gist:X,github:ee,plunk:te,template:ne,webtask:re}}var t,n,r,o,a;return e.$inject=["$injector"],t=e,(n=[{key:"getSpec",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.specResolvers[e];if("function"!=typeof r)throw new Error("Unexpected spec type '".concat(e));return Object.assign(n,{spec:r(t)})}},{key:"create",value:function(){return this.showCreateModal()}},{key:"showWebtaskImportModal",value:(o=regeneratorRuntime.mark((function e(){var t,n,r,o,a,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=localStorage.getItem("wt:token");try{Object(p.validateToken)({token:t})}catch(e){t=null,localStorage.removeItem("wt:token")}if(t){e.next=9;break}return n=this.injector.get("oauth"),e.next=6,n.authenticate("webtask",{responseType:"accessToken"});case 6:r=e.sent,t=r.accessToken,localStorage.setItem("wt:token",t);case 9:return o=Object(p.createClient)({token:t}),e.prev=10,a=this.injector.get("$uibModal"),e.next=14,a.open({animation:!1,component:"plunkerImportWebtaskModal",resolve:{webtaskClient:function(){return o}}}).result;case 14:return i=e.sent,s=i.webtask,e.abrupt("return",{container:s.claims.ten,name:s.claims.jtn});case 19:if(e.prev=19,e.t0=e.catch(10),"string"!=typeof e.t0){e.next=23;break}throw new u.a(e.t0);case 23:throw e.t0;case 24:case"end":return e.stop()}}),e,this,[[10,19]])})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=o.apply(e,t);function i(e){K(a,n,r,i,s,"next",e)}function s(e){K(a,n,r,i,s,"throw",e)}i(void 0)}))},function(){return a.apply(this,arguments)})},{key:"showCreateModal",value:function(){var e=this.injector.get("$q");return this.injector.get("$uibModal").open({component:"plunkerCreateModal",resolve:{hashish:function(){return"v1.4.0"},templates:["$http",function(e){return e.get("https://raw.githubusercontent.com/plnkr/starters/".concat("v1.4.0","/templates.json")).then((function(e){return e.data}))}]}}).result.catch((function(t){return"string"==typeof t&&(t=new u.a(t)),e.reject(t)}))}},{key:"showGistImportModal",value:function(){var e=this.injector.get("$q");return this.injector.get("$uibModal").open({component:"plunkerImportGistModal"}).result.catch((function(t){return"string"==typeof t&&(t=new u.a(t)),e.reject(t)}))}},{key:"showGithubImportModal",value:function(){var e=this.injector.get("$q");return this.injector.get("$uibModal").open({component:"plunkerImportGithubModal"}).result.catch((function(t){return"string"==typeof t&&(t=new u.a(t)),e.reject(t)}))}},{key:"showTemplateImportModal",value:function(){var e=this.injector.get("$q");return this.injector.get("$uibModal").open({component:"plunkerImportTemplateModal",size:"lg"}).result.catch((function(t){return"string"==typeof t&&(t=new u.a(t)),e.reject(t)}))}}])&&_(t.prototype,n),r&&_(t,r),e}();function Z(){return""}function X(e){var t=e.id;return"gist:".concat(t)}function ee(e){var t=e.user,n=e.repo,r=e.hashish,o=void 0===r?"master":r,a=e.path;return"github:"+[t,n,o,(void 0===a?"/":a).split("/").filter(Boolean).join("/")].filter(Boolean).join("/")}function te(e){return e.id}function ne(e){var t=e.id;return"tpl:".concat(t)}function re(e){var t=e.container,n=e.name;return"wt:".concat(t,"/").concat(n)}function oe(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ae(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}V.dependencies=[H.a,q.a,J.a];var ie=c.a.module("plunker.service.worksession",[].concat(oe(V.dependencies),oe(b.dependencies),oe(C.dependencies),oe(I.dependencies),oe(Q.dependencies))).component("plunkerCreateModal",v).component("plunkerImportGistModal",b).component("plunkerImportGithubModal",C).component("plunkerImportTemplateModal",I).component("plunkerImportWebtaskModal",Q).service("worksession",V).name,se=n(1185);function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var le={template:n.n(se).a,bindings:{project:"<"},controller:function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.injector=t}var t,n,r;return e.$inject=["$injector"],t=e,(n=[{key:"canFork",value:function(){var e=this.injector.get("session"),t=Array.isArray(e.claims.scope)&&-1!==e.claims.scope.indexOf("plunk:fork"),n=this.project.isSaved();return t&&n}},{key:"canSave",value:function(){var e=this.injector.get("session"),t=Array.isArray(e.claims.scope)&&-1!==e.claims.scope.indexOf("plunk:save"),n=!this.project.isSaved()||this.project.isEditableBy(e);return t&&n}},{key:"onClickCreate",value:function(e){var t=this.injector.get("commander");e.preventDefault(),t.execute("editor.create")}},{key:"onClickFork",value:function(e){var t=this.injector.get("commander");e.preventDefault(),t.execute("editor.fork")}},{key:"onClickSave",value:function(e){var t=this.injector.get("commander");e.preventDefault(),t.execute("editor.save")}}])&&ce(t.prototype,n),r&&ce(t,r),e}(),dependencies:[o.a,r.a,a.a,i.a,ie]}},1334:function(e,t,n){"use strict";n.r(t),n.d(t,"EditorComponent",(function(){return W}));n(341),n(14),n(20),n(12),n(13),n(80),n(28),n(24),n(7),n(57),n(25),n(85);var r=n(22),o=n(34),a=n.n(o),i=n(938),s=n.n(i),c=n(641),l=(n(11),n(27),n(42),n(17),n(8),n(6)),u=n.n(l),p=n(1017),d=n.n(p);n(1018);var f={template:d.a,dependencies:[],restrict:"E",replace:!0,scope:{},bindToController:{},controller:function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},controllerAs:"$ctrl"};function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h,y=u.a.module("plunker.component.agGridSponsor",(h=f.dependencies,function(e){if(Array.isArray(e))return m(e)}(h)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(h)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).directive("plunkerAgGridSponsor",(function(){return f})).name,v=n(1019),g=n(792),k=n(301),b=(n(31),n(1141)),w=n.n(b),j=(n(1142),u.a.module("plunker.component.tagsInput",[]).directive("plunkerTagsInput",[function(){return{restrict:"E",replace:!0,require:["plunkerTagsInput","ngModel"],scope:{},controller:"PlunkerTagsInputController as vm",bindToController:{placeholder:"@",required:"@",tags:"=ngModel"},template:w.a,link:function(e,t,n,r){r[0].ngModel=r[1],r[0].$element=t,r[0].inputEl=t.find("input")[0]}}}]).controller("PlunkerTagsInputController",(function(){var e=this;function t(e,t){e.stopPropagation(),i(t)}function n(t,n){var r=e.tags.slice();r.splice(n,1),e.ngModel.$setViewValue(r,"change"),a(e.tags.length)}function r(t){if(o(t=t.trim())){var n=e.tags.concat([t]);e.ngModel.$setViewValue(n,"change"),e.inputEl.value=""}}function o(t){return!!t.match(/^[-_a-zA-Z0-9]+$/)&&e.tags.indexOf(t)<0}function a(t){t===e.tags.length?e.inputEl.focus():i(t)}function i(t){var n=Array.prototype.slice.call(e.$element.children(),0,-1)[t];n&&n.focus()}e.hasFocus=!1,e.input="",e.handleBlur=function(){r(e.inputEl.value),e.hasFocus=!1},e.handleClick=function(t){t.preventDefault(),e.inputEl.focus()},e.handleFocus=function(){e.hasFocus=!0},e.handleBlurTag=function(e){e.stopPropagation()},e.handleFocusTag=t,e.handleKeyDown=function(n){switch(n.keyCode){case 8:e.inputEl.value||t(n,e.tags.length-1);break;case 9:if(!e.inputEl.value.trim())break;case 32:case 188:n.preventDefault(),r(e.inputEl.value)}},e.handleKeyUp=function(){e.ngModel.$setValidity("tags",!e.input||o(e.input))},e.handleRemoveTag=n,e.handleSubmitTag=function(e,t){e.preventDefault(),e.stopPropagation(),r(t)},e.handleTagKeyDown=function(e,t){switch(e.keyCode){case 8:case 46:return e.preventDefault(),e.stopPropagation(),n(e,t);case 37:return a(t-1);case 39:return a(t+1)}}})).name),C=n(195),$=n(129),M=n(244),x=n(153),D=n(205),E=n(152),T=n(52),I=n(664),S=n(1256),L=n(40),A=n(53),O=n(1144),N=n.n(O),P=n(1145),R=n.n(P);n(1146);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var W={template:N.a,bindings:{history:"<",project:"<"},controller:function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.adUnit=window.innerHeight>768?"plnkr_300x250":"plnkr_300x100_320x50",this.autoCloseSidebar=!1,this.commander=o,this.disposers=[],this.injector=t,this.scope=r,this.sidebar={currentId:"tree",panes:["tree","history","config"],size:"lg"},this._onTreeEvent=s()(this.onTreeEvent.bind(this),2e3,{maxWait:6e4}),this.boundOnResize=s()(this.onResize.bind(this),200)}var t,n,r;return e.$inject=["$injector","$location","$scope","commander"],t=e,(n=[{key:"$doCheck",value:function(){if(this.canEdit()){if(-1===this.sidebar.panes.indexOf("project")){var e=this.sidebar.panes.slice();e.splice(1,0,"project"),this.sidebar.panes=e}}else{var t=this.sidebar.panes.indexOf("project");if(t>-1){var n=this.sidebar.panes.slice();n.splice(t,1),this.sidebar.panes=n}}}},{key:"$onDestroy",value:function(){this.project.tree.offAny(this._onTreeEvent),this._onTreeEvent.flush(),this.project.tree.remove(),window.removeEventListener("resize",this.boundOnResize),this.disposers.forEach((function(e){return e.dispose()}))}},{key:"$onInit",value:function(){var e=this,t=this.injector.get("commander"),n=this.scope;this.previewPaneType="preview",this.project.tree.onAny(this._onTreeEvent),this.boundOnIdeAndWorkspaceEvent=this.onIdeAndWorkspaceEvent.bind(this),["ide.**","workspace.**"].forEach((function(t){e.commander.on(t,e.boundOnIdeAndWorkspaceEvent),e.disposers.push({dispose:function(){return e.commander.removeListener(t,e.boundOnIdeAndWorkspaceEvent)}})})),t.createCommand({scope:n,name:"editor.create",description:"Create a new project",hotkeys:c.KeyMod.CtrlCmd|c.KeyCode.KEY_O,handler:function(t){return e.commandCreate(t)}}),t.createCommand({scope:n,name:"editor.delete",description:"Delete the project",handler:function(t){return e.commandDelete(t)}}),t.createCommand({scope:n,name:"editor.fork",description:"Save this project as a new plunk",hotkeys:c.KeyMod.CtrlCmd|c.KeyMod.Shift|c.KeyCode.KEY_S,handler:function(t){return e.commandFork(t)}}),t.createCommand({scope:n,name:"editor.new",description:"Start a new project",hotkeys:c.KeyMod.CtrlCmd|c.KeyMod.Shift|c.KeyCode.KEY_N,defaults:{type:"basic"},handler:function(t){return e.commandCreate(t)}}),t.createCommand({scope:n,name:"editor.open",hotkeys:"Mod-Shift-n",description:"Open a project in the editor",handler:function(t){return e.commandOpen(t)}}),t.createCommand({scope:n,name:"editor.save",description:"Save your work",hotkeys:c.KeyMod.CtrlCmd|c.KeyCode.KEY_S,handler:function(t){return e.commandSave(t)}}),t.createCommand({scope:n,name:"editor.history.remove",description:"Remove an entry from your session history",handler:function(t){return e.commandHistoryRemove(t)}})}},{key:"$postLink",value:function(){var e=this,t=this.injector.get("commander"),n=this.injector.get("$location"),r=this.injector.get("$stateParams"),o=n.search(),a=("string"==typeof o.open?o.open.split(",").filter(Boolean):[]).map((function(t){return e.project.tree.find([t])})).filter(Boolean),i=a.length?a:[this.project.tree.find(["index.html","readme.md","demo.html",".html"])||this.project.tree.getEntries()[0]],s=Promise.resolve();Array.isArray(i)&&i.length&&(s=i.reduce((function(e,n){return t.execute("workspace.open",{entry:n,focus:!0})}),s));var c=!!Object.hasOwnProperty.call(o,"preview")&&(o.preview||!0);if(c||""===c){var l=!0===c||""===c?[{entry:this.project.tree,options:{deferRun:r.deferRun},type:this.previewPaneType}]:c.split(",").map((function(t){return t?{entry:e.project.tree.find([t]),type:e.previewPaneType}:{entry:e.project.tree,type:e.previewPaneType}}));n.search("preview",null).replace(),l.forEach((function(e){s=s.then((function(n){return t.execute("workspace.open",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){Y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({after:n},e))}))}))}else a.length||(s=s.then((function(n){return t.execute("workspace.open",{after:n,entry:e.project.tree,options:{deferRun:!0},type:e.previewPaneType})})));window.addEventListener("resize",this.boundOnResize),this.onResize()}},{key:"canEdit",value:function(){var e=this.injector.get("session");return this.project.isEditableBy(e)}},{key:"onChangeStar",value:function(){var e=this,t=this.injector.get("api");return this.projectSaving=!0,t.request({method:"GET",path:"/plunks/".concat(encodeURIComponent(this.project.plunk.id)),expectStatus:[200]}).then((function(t){return e._onPlunkSaved(t.data,{location:!1})})).finally((function(){return e.projectSaving=!1}))}},{key:"onClickDelete",value:function(e){var t=this.injector.get("commander");e.preventDefault(),e.stopPropagation(),t.execute("editor.delete")}},{key:"onClickHistoryEntry",value:function(e,t){var n=this.injector.get("activity"),r=this.injector.get("commander");e.preventDefault(),e.stopPropagation(),n.trackEvent({eventCategory:"Editor",eventAction:"Open recent session"}),r.execute("editor.open",{spec:t.spec,entryId:t.id})}},{key:"onClickRemoveHistoryEntry",value:function(e,t){var n=this.injector.get("commander");e.preventDefault(),e.stopPropagation(),n.execute("editor.history.remove",{entry:t})}},{key:"onClickTogglePublic",value:function(e,t){var n=this,r=this.injector.get("activity"),o=this.injector.get("api"),a=this.injector.get("toast"),i={title:this.project.plunk.title,tags:this.project.plunk.tags,private:t};return this.projectSaving=!0,r.trackEvent({eventCategory:"Plunk",eventAction:"Toggle privacy",eventLabel:"Editor"}),o.request({data:i,method:"PATCH",path:"/plunks/".concat(encodeURIComponent(this.project.plunk.id)),expectStatus:[200]}).then((function(e){var t=n.injector.get("projects");n.project.setPlunk(e.data),t.update(n.project.getEntry());var r=e.data.private?"private":"public";return a.success("Plunk marked as ".concat(r))}),(function(e){return a.error("Error updating plunk: ".concat(e.message))})).finally((function(){n.projectSaving=!1}))}},{key:"onIdeAndWorkspaceEvent",value:function(e,t){var n=this;this.autoCloseSidebar&&(t&&t.finally.bind(t)||setTimeout)((function(){n.commander.execute("sidebar.show")}))}},{key:"onTogglePane",value:function(e){var t=e.event,n=e.pane;if(n.type===this.previewPaneType){var r=this.injector.get("$location"),o=r.search(),a="string"==typeof o.preview?o.preview.split(","):!0===o.preview?[""]:[],i=n.entry.pathname,s=a.indexOf(i);-1!==s&&a.splice(s,1),"open"===t?(i||a.length?(a.push(i),o.preview=a.join(",")):o.preview=!0,r.search(o).replace()):"close"===t&&(1!==a.length||a[0]?a.length?o.preview=a.join(","):delete o.preview:o.preview=!0,r.search(o).replace())}}},{key:"onResize",value:function(){this.autoCloseSidebar=this.shouldAutoCloseSidebar()}},{key:"onTreeEvent",value:function(e){var t=this,n=this.injector.get("projects"),r=function(){t.project.setDirty(!0),n.update(t.project.getEntry())};"removeListener"!==e&&(this.scope.$root.$$phase?this.scope.$apply(r):r())}},{key:"commandCreate",value:function(e){var t=e.type,n=e.spec;return this.injector.get("$state").go("editor",{type:t,spec:n},{reload:!0,inherit:!1}).catch((function(){return null}))}},{key:"commandDelete",value:function(){var e=this,t=this.injector.get("toast");return this.projectSaving=!0,t.confirm({title:"Are you sure that you would like to delete this plunk?",resolveOnNo:!0}).then((function(n){if(!n)return!1;var r=e.injector.get("activity"),o=e.injector.get("api");return r.trackEvent({eventCategory:"Plunk",eventAction:"Delete plunk",eventLabel:"Editor"}),o.request({method:"DELETE",path:"/plunks/".concat(e.project.plunk.id),expectStatus:[200,204]}).then((function(){t.success("Plunk deleted");var n=e.injector.get("commander"),r=e.project.getEntry();return e.injector.get("projects").remove(r),n.execute("editor.create",{type:"basic"})}),(function(e){return t.error("Delete failed: ".concat(e.statusText)),!1}))})).finally((function(){e.projectSaving=!1}))}},{key:"updatePlunk",value:function(){var e=this,t=this.injector.get("api"),n=this.injector.get("toast");return this.projectSaving=!0,t.request({data:{title:this.project.plunk.title,tags:this.project.plunk.tags},method:"PATCH",path:"/plunks/".concat(encodeURIComponent(this.project.plunk.id)),expectStatus:[200]}).then((function(t){return e._onPlunkSaved(t.data,{location:!1})})).then((function(){n.success("Plunk updated")}),(function(e){n.error("Error updating plunk: ".concat(e.message))})).finally((function(){return e.projectSaving=!1}))}},{key:"commandFork",value:function(){var e=this,t=this.injector.get("activity"),n=this.injector.get("api"),r=this.injector.get("toast");t.trackEvent({eventCategory:"Plunk",eventAction:"Fork plunk",eventLabel:"Editor"});var o={title:this.project.plunk.title,tags:this.project.plunk.tags,entries:[],private:!0};return this.project.tree.traverse((function(e){o.entries.push(e.toJSON())}),{isLeaf:!0}),this.projectSaving=!0,n.request({data:o,method:"POST",path:"/plunks/".concat(encodeURIComponent(this.project.plunk.id),"/forks"),expectStatus:[201]}).then((function(t){return e._onPlunkSaved(t.data,{location:!0,new:!0})})).then((function(){return r.success("Plunk updated")}),(function(e){return r.error("Error forking plunk: ".concat(e.message))})).finally((function(){e.projectSaving=!1}))}},{key:"commandHistoryRemove",value:function(e){var t=this,n=e.entry,r=e.force,o=this.injector.get("$q"),a=this.injector.get("projects"),i=this.injector.get("toast");return(r?o.resolve(!0):i.confirm({title:"Are you sure that you would like to remove this entry from your session history?",resolveOnNo:!0})).then((function(e){e&&(t.injector.get("activity").trackEvent({eventCategory:"Editor",eventAction:"Delete recent session"}),a.remove(n))}),(function(){}))}},{key:"commandOpen",value:function(e){var t=e.entryId,n=e.spec;return this.injector.get("$state").go("editor.spec",{entryId:t,spec:n},{inherit:!1,reload:!0})}},{key:"commandSave",value:function(){var e=this;return this.projectSaving=!0,(this.project.isSaved()?function(){var t=e.injector.get("activity"),n=e.injector.get("api"),r={entries:[]};return t.trackEvent({eventCategory:"Plunk",eventAction:"Save plunk version",eventLabel:"Editor"}),e.project.tree.traverse((function(e){r.entries.push(e.toJSON())}),{isLeaf:!0}),n.request({data:r,method:"POST",path:"/plunks/".concat(encodeURIComponent(e.project.plunk.id),"/versions"),expectStatus:[201]})}():e._showEditDialog({title:e.project.title,tags:e.project.tags}).then((function(t){var n=e.injector.get("activity"),r=e.injector.get("api"),o={title:t.title,tags:t.tags,entries:[],private:!0};return n.trackEvent({eventCategory:"Plunk",eventAction:"Save plunk",eventLabel:"Editor"}),e.project.tree.traverse((function(e){o.entries.push(e.toJSON())}),{isLeaf:!0}),r.request({data:o,method:"POST",url:"".concat("https://api.plnkr.co/v2","/plunks"),expectStatus:[201]})}))).then((function(t){return e._onPlunkSaved(t.data,{location:"replace"})})).then((function(){return e.injector.get("toast").success("Plunk saved")}),(function(t){if(!(t instanceof D.a))return e.injector.get("toast").error("Error saving plunk: ".concat(t.message))})).finally((function(){e.projectSaving=!1}))}},{key:"shouldAutoCloseSidebar",value:function(){return document.body.offsetWidth<=450}},{key:"_onPlunkSaved",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.injector.get("$state"),r=this.injector.get("projects");if(this.project.setPlunk(e),r.update(this.project.getEntry(),{new:t.new}),t.location)return n.go("editor.spec",{spec:e.id,entryId:this.project.entryId},{custom:{sync:!0},location:t.location})}},{key:"_showEditDialog",value:function(e){return e||(e={}),this.injector.get("$uibModal").open({animation:!1,bindToController:!0,controller:["$uibModalInstance",function(t){this.data={private:!!e.private,title:e.title||"",tags:e.tags?e.tags.slice():[]},this.onClickCancel=function(){t.dismiss(new D.a("Clicked cancel"))},this.onClickClose=function(){t.dismiss(new D.a("Clicked close"))},this.onSubmit=function(e,n){t.close(n)}}],controllerAs:"$ctrl",size:"lg",template:R.a}).result}}])&&F(t.prototype,n),r&&F(t,r),e}(),dependencies:[E.a,y,r.a,"ui.router",a.a,$.a,T.a,M.a,v.a,g.a,k.a,I.a,S.default,L.a,j,x.a,A.a,C.a],name:"plunkerEditor"}},664:function(e,t,n){"use strict";(function(e){n(17),n(14),n(11),n(202),n(28),n(31),n(57),n(12),n(13),n(7),n(20),n(8);var r=n(6),o=n.n(r),a=n(140),i=n.n(a),s=n(51),c=n(709),l=n(665);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t.a=o.a.module("plunker.service.panes",[l.a]).service("panes",["$injector","$q",function(t,n){var r={},o=[];return r.workspace=[],r.focusedPane=null,r.close=a,r.focus=function(e,t){if(!e.strategy){var r=new Error("Attempting to move a pane that is not attached");return n.reject(r)}e.strategy.focus(),t.selection&&e.strategy.select(t.selection);return n.resolve(e)},r.get=function(e){e||(e={});var t=e.last?s.findLast:s.find,n=Object(s.omit)(e,"last"),o=Object.keys(n).length;return o>1?t(r.workspace,n):1===o?t(r.workspace,Object(s.toPairs)(n)[0]):t(r.workspace)},r.getByEntry=i,r.getByType=function(e,t){t||(t={});var n=t.recent?o:r.workspace;return t.last?Object(s.findLast)(n,["type",e]):Object(s.find)(n,["type",e])},r.getDefaultType=l,r.move=function(e,t){var o,a=r.workspace.indexOf(e);if(-1===a)return o=new Error("Attempting to move a pane that is not attached"),n.reject(o);if(r.workspace.splice(a,1),t.after)u(e,"after",t.after);else if(t.before)u(e,"before",t.before);else{if(!t.replace)return o=new Error("Attempting to move a pane without an adjacency predicate"),n.reject(o);u(e,"replace",t.replace)}return n.resolve(e)},r.open=function(t,c){var p;c||(c={});c.type||(c.type=l(t));if(i(t,{type:c.type}))return p=new Error("A pane is already open for the entry `"+(t.pathname||"(root)` with type `"+c.type+"`")),n.reject(p);var d=new y(t,c.type,c.options);c.after?u(d,"after",c.after):c.before?u(d,"before",c.before):c.replace?u(d,"replace",c.replace):r.workspace.splice(0,0,d);var f=n.defer(),m=setTimeout((function(){!function(e){e.removeListener("mount",h),f.reject(new Error("Timeout while mounting pane"))}(d)}),5e3);return d.on("blur",(function(e){r.focusedPane===e&&(r.focusedPane=null)})),d.on("focus",(function(e){Object(s.remove)(o,e),o.unshift(e),r.focusedPane=e})),d.once("mount",h),d.once("unmount",(function(t){Object(s.remove)(r.workspace,t),Object(s.remove)(o,t),t.entry.removeListener("remove",v),e.nextTick((function(){t.removeAllListeners()}))})),d.entry.once("remove",v),f.promise;function h(e){clearTimeout(m),f.resolve(e)}function v(){a(d)}},r.reset=function(){var e=[];for(;r.workspace.length;){var t=r.workspace[r.workspace.length-1];e.push(a(t))}return n.all(e)},r.Pane=y,r;function a(e){if(-1===r.workspace.indexOf(e)){var t=new Error("Attempting to close a pane that is not attached");return n.reject(t)}return Object(s.remove)(r.workspace,e),Object(s.remove)(o,e),n.resolve()}function i(e,t){return r.workspace.find((function(n){if(n.entry!==e)return!1;var r=t&&t.type||l(e);return n.type===r}))}function l(e){if(e instanceof c.c)return e.strategy instanceof c.b?"code":e.strategy instanceof c.a&&e.mimeType.match(/^image\//)?"image":void 0;console.warn("Panes can only be created for FileEntry objects",e)}function u(e,t,o){var a,i={after:{offset:1,amount:0},before:{offset:0,amount:0},replace:{offset:0,amount:1}}[t];if(!(o instanceof y))return a=new Error("The `"+t+"` option was used but its value was not a `Pane` instance"),n.reject(a);var s=r.workspace.indexOf(o);if(-1===s)return a=new Error("The `"+t+"` option was used but the specified pane was not found"),n.reject(a);r.workspace.splice(s+i.offset,i.amount,e)}}]).name;var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,e);var t,n,r,o=f(a);function a(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=o.call(this)).entry=e,r.type=t,r.options=n||{},r.controller=null,r.strategy=null,r}return t=a,(n=[{key:"focus",value:function(){this.strategy&&this.strategy.focus&&this.strategy.focus()}},{key:"setController",value:function(e){this.controller=e}},{key:"setStrategy",value:function(e){this.strategy=e}}])&&p(t.prototype,n),r&&p(t,r),a}(i.a)}).call(this,n(337))},665:function(e,t,n){"use strict";n(25),n(8);var r=n(6),o=n.n(r),a=n(140),i=n(51);t.a=o.a.module("plunker.service.preferences",[]).value("defaultPreferences",{betaWarning:!0}).factory("preferences",["defaultPreferences",function(e){var t=function(){var t;try{var n=window.localStorage.getItem("plunker.preferences");t=JSON.parse(n)}catch(e){console.warn("Plunker preferences are not valid JSON")}var r=Object(i.defaultsDeep)({},t,e);return setTimeout(s,200),Object(i.create)(a.prototype,r)}(),n={};return t.on("change",(function(e){var t=Object(i.get)(n,e.path,[]);Object(i.forEach)(t,(function(t){t(e.value)}))})),t.define=function(e,n){void 0===Object(i.get)(t,e)&&o(e,n);return r(e)},t.get=r,t.set=o,t.watch=function(e,t){e="string"==typeof e?e.split("."):e,Object(i.get)(n,e)||Object(i.set)(n,e,[]);var r=Object(i.get)(n,e);-1===r.indexOf(t)&&r.push(t);return function(){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}},t;function r(e,n){return Object(i.get)(t,e,n)}function o(e,n){return e="string"==typeof e?e.split("."):e,Object(i.set)(t,e,n),t.emit("change",{path:e,value:n}),s(),n}function s(){try{window.localStorage.setItem("plunker.preferences",JSON.stringify(t,(function(e,t){return"_"===e[0]?void 0:t})))}catch(e){console.warn("Error saving Plunker preferenecs")}}}]).name},786:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(11),n(42),n(17),n(14),n(24),n(8),n(12),n(13),n(7),n(27),n(122);var r=n(889);function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var l=function(){function e(t,n){var o=this,a=n.isChild,i=n.registerMessageListener,s=n.sendMessage,c=n.showWarnings,l=void 0!==c&&c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.localMethods=new Map,this.nextSeqId=0,this.remoteApiDfd=new r.a,this.remoteInvocations=new Map,this.removeMessageListener=i(this.onMessage.bind(this)),this.sendMessage=function(e){return function(t){try{return e(t)}catch(e){return Promise.reject(e)}}}(s),this.showWarnings=!!l,a?this.sendApi(t):this.remoteApiDfd.promise.then((function(){o.sendApi(t)}))}var t,n,a;return t=e,(n=[{key:"getRemoteApi",value:function(){return this.remoteApiDfd.promise}},{key:"hydrateResult",value:function(e){if(e&&"object"===i(e)&&c(e,"$error")){var t=new Error(e.$error.message);return t.code=e.$error.code,t.name=e.$error.name,t.stack=e.$error.stack,t.statusCode=e.$error.statusCode,t}return e}},{key:"invokeOnRemote",value:function(e){for(var t=new r.a,n=this.nextSeqId++,o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];return this.sendMessage({request:e,args:a,seqId:n}),this.remoteInvocations.set(n,t),t.promise}},{key:"onMessage",value:function(e){var t=this;if(c(e,"methods")){var n={},r=function(r){var o=e.methods[r];n[r]=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.invokeOnRemote.apply(t,[o].concat(n))}};for(var a in e.methods)r(a);for(var i in e.props)n[i]=e.props[i];return this.remoteApiDfd.resolve(n)}if(c(e,"request")){var s=this.localMethods.get(e.request);if(!s)return this.sendMessage({reject:e.seqId,result:{$error:{message:"Method not found"}}});try{return Promise.resolve(s.apply(void 0,o(e.args||[]))).then((function(n){return t.sendMessage({resolve:e.seqId,result:n})}),(function(n){return t.sendMessage({reject:e.seqId,result:{$error:{code:n.code,message:n.message,name:n.name,stack:n.stack,statusCode:n.statusCode}}})}))}catch(t){return this.sendMessage({reject:e.seqId,result:{$error:{code:t.code,message:t.message,name:t.name,stack:t.stack,statusCode:t.statusCode}}})}}if(c(e,"reject")){var l=this.remoteInvocations.get(e.reject);return l?l.reject(this.hydrateResult(e.result)):void(this.showWarnings&&console.warn("Received an unexpected rejection",e))}if(c(e,"resolve")){var u=this.remoteInvocations.get(e.resolve);return u?u.resolve(this.hydrateResult(e.result)):void(this.showWarnings&&console.warn("Received an unexpected resolution",e))}}},{key:"sendApi",value:function(e){var t={},n={};for(var r in e)if("function"==typeof e[r]){var o=this.nextSeqId++;t[r]=o,this.localMethods.set(o,e[r])}else n[r]=e[r];return this.sendMessage({methods:t,props:n})}}])&&s(t.prototype,n),a&&s(t,a),e}()},792:function(e,t,n){"use strict";var r=n(6),o=n.n(r),a=n(34),i=n.n(a),s=n(54),c=n(793),l=n.n(c),u=n(794),p=n.n(u);n(795);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.a=o.a.module("plunker.component.inlinePlunk",[i.a,s.a]).directive("plunkerInlinePlunk",["$templateCache",function(e){return e.put("component/templates/plunkPopup.html",l.a),{restrict:"E",replace:!0,scope:{},bindToController:{plunk:"="},controller:function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.injector=t}var t,n,r;return e.$inject=["$injector"],t=e,(n=[{key:"$onInit",value:function(){var e=this;if("string"==typeof this.plunk)return this.injector.get("api").request({url:"".concat("https://api.plnkr.co/v2","/plunks/").concat(encodeURIComponent(this.plunk))}).then((function(t){e.plunk=t.data}))}}])&&d(t.prototype,n),r&&d(t,r),e}(),controllerAs:"vm",template:p.a,transclude:!0}}])},793:function(e,t){e.exports='<div class=plunker-plunk-popup> <a class="btn btn-primary" ui-sref="editor.spec({ spec: vm.plunk.id })">Open in Editor</a> </div> '},794:function(e,t){e.exports='<a class=plunker-inline-plunk ng-transclude uib-tooltip="{{ vm.plunk.title }}" ui-sref="plunk({ plunkId: vm.plunk.id })">{{ vm.plunk.id || vm.plunk }}</a> '},795:function(e,t,n){},796:function(e,t,n){"use strict";n.r(t),n.d(t,"createClient",(function(){return u})),n.d(t,"validateToken",(function(){return p})),n.d(t,"resolveNpmVersion",(function(){return d}));n(71),n(24),n(7),n(31),n(57),n(25);var r=n(893),o=n.n(r),a=n(894),i=n(168);function s(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){s(a,r,o,i,c,"next",e)}function c(e){s(a,r,o,i,c,"throw",e)}i(void 0)}))}}var l=/^wt:owner:(.+)$/;function u(e){var t=e.token,n=Object(i.a)(t),r=(Array.isArray(n.scope)?n.scope:(n.scope||"").split(" ")).find((function(e){return l.test(e)})).match(l)[1];return a.init({container:r,token:t,url:"https://webtask.it.auth0.com"})}function p(e){var t=e.token,n=1e3*Object(i.a)(t).exp;if(isNaN(n))throw new Error("Unexpected token expiry");if(n<=Date.now())throw new Error("Token has expired");return t}function d(e){return f.apply(this,arguments)}function f(){return(f=c(regeneratorRuntime.mark((function e(t){var n,r,a,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"*",e.next=3,o()("".concat(void 0,"/v1/npm/contents/").concat(t,"@").concat(n,"/package.json"));case 3:return r=e.sent,e.next=6,r.json();case 6:return a=e.sent,e.abrupt("return",a.version);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},889:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(24),n(7);var r=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n})),this.settled=!1,this.promise.then((function(){return t.settled="result"}),(function(){return t.settled="error"}))}},901:function(e,t){},902:function(e,t){},924:function(e,t,n){"use strict";n(8);var r=n(6),o=n.n(r),a=n(708),i=n.n(a),s=n(778),c=n.n(s),l=n(638),u=n(651),p=n(51),d=(n(57),o.a.module("plunker.directive.contextmenu",[]).directive("ngContextmenu",["$parse",function(e){return{restrict:"A",compile:function(t,n){var r=e(n.ngContextmenu,null,!0);return function(e,t){t.on("contextmenu",(function(t){e.$apply((function(){r(e,{$event:t})}))}))}}}}]).directive("contextMenu",["$parse","$uibPosition",function(e,t){return function(e,n,r){n.on("contextmenu",(function(a){a.stopPropagation(),e.$apply((function(){a.preventDefault();var i=e.$eval(r.contextMenu,{$event:a}),s=e.$eval(r.model);if(!(i instanceof Array))throw'"'+r.contextMenu+'" not an array';0!==i.length&&function(e,n,r,a,i){if(!s)var s=o.a.element;s(n.currentTarget).addClass("context");var c=s("<div>");c.addClass("dropdown clearfix");var l=s("<ul>");l.addClass("dropdown-menu"),l.attr({role:"menu"}),l.css({display:"block",position:"absolute",left:n.pageX+"px",top:n.pageY+"px"}),o.a.forEach(r,(function(t){var r=s("<li>");if(null===t)r.addClass("divider");else{var i=s("<a>");i.attr({tabindex:"-1",href:"#"});var c="string"==typeof t[0]?t[0]:t[0].call(e,e,n,a);i.text(c),r.append(i),!o.a.isDefined(t[2])||t[2].call(e,e,n,c,a)?r.on("click",(function(r){r.preventDefault(),e.$apply((function(){s(n.currentTarget).removeClass("context"),g(),t[1].call(e,e,n,a)}))})):(r.on("click",(function(e){e.preventDefault()})),r.addClass("disabled"))}l.append(r)})),c.append(l);var u=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);c.css({width:"100%",height:u+"px",position:"absolute",top:0,left:0,zIndex:9999});var p=o.a.element(n.currentTarget);s(document).find("body").append(c);var d=t.offset(p),f=t.positionElements(p,l,"auto bottom-left",!0),m=d.left,h=d.top+d.height,y=f.left-m,v=f.top-h;function g(){c.remove(),i.removeClass("plunker-menu-active")}l.css({left:n.pageX-y+"px",top:n.pageY-v+"px"}),c.on("mousedown",(function(e){s(e.target).hasClass("dropdown")&&(s(n.currentTarget).removeClass("context"),g())})).on("contextmenu",(function(e){s(e.currentTarget).removeClass("context"),e.preventDefault(),g()})),i.addClass("plunker-menu-active")}(e,a,i,s,n)}))}))}}]).name),f=n(53),m=n(1047),h=n.n(m),y=o.a.module("plunker.component.fileTree.treeDirectory",[i.a,d,f.a]).directive("plunkerTreeDirectory",[function(){return{restrict:"E",replace:!0,template:h.a,scope:{},bindToController:{activeEntry:"<",entry:"<",hiddenFolders:"<?",onClick:"&",onContextmenu:"&"},controller:"PlunkerTreeDirectoryController as $ctrl"}}]).controller("PlunkerTreeDirectoryController",["$scope","toast",function(e,t){var n=this;n.expanded=!1,n.$onInit=function(){n.expanded=n.entry.route.length<2},n.acceptsDrop=function(e,t){var r=e.dataTransfer.types,o=r.contains?r.contains("Files"):-1!==r.indexOf("Files");return e.dataTransfer.effectAllowed=t?"move":"copy",!t&&o||t instanceof l.a&&!(t instanceof u.a)&&n.entry!==t&&!n.entry.isDescendantOf(t)},n.onContextMenu=function(){var e=[];n.entry.parent&&(e.push(["Rename file...",function(){t.prompt({title:"Rename "+n.entry.type,label:"Filename",value:n.entry.filename}).then((function(e){return n.entry.rename(e)}))}]),e.push(["Delete",function(){t.confirm({title:"Delete "+n.entry.type,body:"Are you sure you would like to delete "+n.entry.pathname+"?",resolveOnNo:!0}).then((function(){return n.entry.remove()}))}]),e.push(null));return e.push(["Create file...",function(){t.prompt({title:"Create file",label:"Filename"}).then((function(e){return n.entry.createFile(e)}))}]),e.push(["Create directory...",function(){t.prompt({title:"Create directory",label:"Filename"}).then((function(e){return n.entry.createDirectory(e)}))}]),e.push(null),e.push(["Download",function(){n.onDownload({entry:n.entry})}]),e.push(null),e.push(["Preview",function(){n.onPreview({entry:n.entry})}]),e},n.getOrderedFilename=function(e){return"directory"===e.type?" "+e.filename.toLowerCase():e.filename.toLowerCase()},n.isHidden=function(e){return Array.isArray(n.hiddenFolders)&&-1!==n.hiddenFolders.indexOf(e.filename)},n.onClickInternal=function(e){n.onClick({$event:e,entry:n.entry}),e.defaultPrevented||(n.expanded=!n.expanded)},n.onDragStart=function(e,t){if(!(window.URL&&window.URL.createObjectURL&&e.dataTransfer&&e.dataTransfer.setData))return;var n=t.toFile(),r=window.URL.createObjectURL(n),o=["application/octet-stream",n.name,r].join(":");e.dataTransfer.setData("DownloadURL",o),e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="copyMove"},n.onDrop=function(t,r){function o(e,t,n){Object(p.forEach)(e,(function(e){if(e.isFile)e.file(Object(p.partialRight)(a,t,n));else{if(!e.isDirectory)throw new Error("Unsupported browser filesystem entry.");n({pathname:t.concat([e.name]).join("/"),type:"directory"}),function(e,t,n){var r=e.createReader(),a=t.concat([e.name]);!function e(){r.readEntries((function(t){(t=Array.prototype.slice.call(t)).length&&(o(t,a,n),e())}),(function(e){console.error("Error reading directory",e)}))}()}(e,t,n)}}))}function a(t,n,r){c()(t,(function(o,a){if(o)console.warn("Error converting Blob to Buffer",o);else{var i={type:"file",pathname:n.concat([t.name]).join("/"),content:a,charset:"binary"};e.$evalAsync((function(){r(i)}))}}))}r?function(e){try{var t="".concat(n.entry.pathname,"/").concat(e.filename);n.entry.root.moveEntry(e,t)}catch(e){console.warn("Move failed",e)}}(r):function(e,t){if(e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length){var n=Array.prototype.slice.call(e.dataTransfer.items),r=n[0].getAsEntry?"getAsEntry":n[0].webkitGetAsEntry?"webkitGetAsEntry":null;if(r)return o(Object(p.map)(n,Object(p.method)(r)),[],t);var i=Array.prototype.slice.call(e.dataTransfer.files);i.length?Object(p.forEach)(i,Object(p.partialRight)(a,[],t)):console.warn("Dropped data does not have any files")}else console.warn("Unsupported browser drop event")}(t,(function(e){e=Object(p.defaults)(e,{appendVersion:!0});try{"file"===e.type&&n.entry.createFile(e.pathname,e),"directory"===e.type&&n.entry.createDirectory(e.pathname,e)}catch(t){console.warn("Failed to create entry `"+e.pathname+"`: "+t.message)}}))}}]).name,v=n(1048),g=n.n(v),k=o.a.module("plunker.component.fileTree.treeFile",[i.a,d,f.a]).directive("plunkerTreeFile",[function(){return{restrict:"E",replace:!0,template:g.a,scope:{},bindToController:{activeEntry:"<",entry:"<",onClick:"&",onContextmenu:"&"},controller:"PlunkerTreeFileController as $ctrl"}}]).controller("PlunkerTreeFileController",["$scope","toast",function(e,t){var n=this;n.onContextMenu=function(){var e=[];return e.push(["Rename file...",function(){t.prompt({title:"Rename "+n.entry.type,label:"Filename",value:n.entry.filename}).then((function(e){return n.entry.rename(e)}))}]),e.push(["Delete",function(){t.confirm({title:"Delete "+n.entry.type,body:"Are you sure you would like to delete "+n.entry.pathname+"?",resolveOnNo:!0}).then((function(){return n.entry.remove()}))}]),e.push(null),e.push(["Download",function(){n.onDownload({entry:n.entry})}]),e.push(null),e.push(["Preview",function(){n.onPreview({entry:n.entry})}]),e},n.onClickFile=function(e){e.preventDefault(),n.onSelect({entry:n.entry})},n.acceptsDrop=function(e,t){var r=e.dataTransfer.types,o=r.contains?r.contains("Files"):-1!==r.indexOf("Files");return e.dataTransfer.effectAllowed=t?"move":"copy",!t&&o||t instanceof l.a&&!(t instanceof u.a)&&n.entry!==t&&!n.entry.isDescendantOf(t)},n.onDragStart=function(e,t){if(!(window.URL&&window.URL.createObjectURL&&e.dataTransfer&&e.dataTransfer.setData))return;var n=t.toFile(),r=window.URL.createObjectURL(n),o=[n.type,n.name,r].join(":");e.dataTransfer.setData("DownloadURL",o),e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="copyMove"},n.onDrop=function(t,r){function o(e,t,n){Object(p.forEach)(e,(function(e){if(e.isFile)e.file(Object(p.partialRight)(a,t,n));else{if(!e.isDirectory)throw new Error("Unsupported browser filesystem entry.");n({pathname:t.concat([e.name]).join("/"),type:"directory"}),function(e,t,n){var r=e.createReader(),a=t.concat([e.name]);!function e(){r.readEntries((function(t){(t=Array.prototype.slice.call(t)).length&&(o(t,a,n),e())}),(function(e){console.error("Error reading directory",e)}))}()}(e,t,n)}}))}function a(t,n,r){c()(t,(function(o,a){if(o)console.warn("Error converting Blob to Buffer",o);else{var i={type:"file",pathname:n.concat([t.name]).join("/"),content:a,charset:"binary"};e.$evalAsync((function(){r(i)}))}}))}r?function(e){try{e.detach(),n.entry.parent.attachChild(e)}catch(e){console.warn("Move failed",e)}}(r):function(e,t){if(e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length){var n=Array.prototype.slice.call(e.dataTransfer.items),r=n[0].getAsEntry?"getAsEntry":n[0].webkitGetAsEntry?"webkitGetAsEntry":null;if(r)return o(Object(p.map)(n,Object(p.method)(r)),[],t);var i=Array.prototype.slice.call(e.dataTransfer.files);i.length?Object(p.forEach)(i,Object(p.partialRight)(a,[],t)):console.warn("Dropped data does not have any files")}else console.warn("Unsupported browser drop event")}(t,(function(e){try{"file"===e.type&&n.entry.parent.createFile(e.pathname,e),"directory"===e.type&&n.entry.parent.createDirectory(e.pathname,e)}catch(t){console.warn("Failed to create entry `"+e.pathname+"`: "+t.message)}}))}}]).name,b=n(1049),w=n.n(b);n(1050),t.a=o.a.module("plunker.component.fileTree",[i.a,y,k]).directive("plunkerTree",[function(){return{restrict:"E",replace:!0,template:w.a,scope:{},bindToController:{activeEntry:"<treeActiveEntry",entry:"<tree",hiddenFolders:"<treeHiddenFolders",onClick:"&treeOnClick",onContextmenu:"&treeOnContextmenu"},controller:"PlunkerFileTreeController as $ctrl"}}]).controller("PlunkerFileTreeController",["$scope",function(e){var t=this;t.acceptsDrop=function(e,n){var r=e.dataTransfer.types,o=r.contains?r.contains("Files"):-1!==r.indexOf("Files");return e.dataTransfer.effectAllowed=n?"move":"copy",!n&&o||n instanceof l.a&&!(n instanceof u.a)&&t.entry!==n&&!t.entry.isDescendantOf(n)},t.onDrop=function(n,r){function o(e,t,n){Object(p.forEach)(e,(function(e){if(e.isFile)e.file(Object(p.partialRight)(a,t,n));else{if(!e.isDirectory)throw new Error("Unsupported browser filesystem entry.");n({pathname:t.concat([e.name]).join("/"),type:"directory"}),function(e,t,n){var r=e.createReader(),a=t.concat([e.name]);!function e(){r.readEntries((function(t){(t=Array.prototype.slice.call(t)).length&&(o(t,a,n),e())}),(function(e){console.error("Error reading directory",e)}))}()}(e,t,n)}}))}function a(t,n,r){c()(t,(function(o,a){if(o)console.warn("Error converting Blob to Buffer",o);else{var i={type:"file",pathname:n.concat([t.name]).join("/"),content:a,charset:"binary"};e.$evalAsync((function(){r(i)}))}}))}r?function(e){try{e.detach(),t.entry.attachChild(e)}catch(e){console.warn("Move failed",e)}}(r):function(e,t){if(e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length){var n=Array.prototype.slice.call(e.dataTransfer.items),r=n[0].getAsEntry?"getAsEntry":n[0].webkitGetAsEntry?"webkitGetAsEntry":null;if(r)return o(Object(p.map)(n,Object(p.method)(r)),[],t);var i=Array.prototype.slice.call(e.dataTransfer.files);i.length?Object(p.forEach)(i,Object(p.partialRight)(a,[],t)):console.warn("Dropped data does not have any files")}else console.warn("Unsupported browser drop event")}(n,(function(e){e=Object(p.defaults)(e,{appendVersion:!0});try{"file"===e.type&&t.entry.createFile(e.pathname,e),"directory"===e.type&&t.entry.createDirectory(e.pathname,e)}catch(t){console.warn("Failed to create entry `"+e.pathname+"`: "+t.message)}}))}}]).name}}]);